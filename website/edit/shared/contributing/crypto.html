<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
	<title>Cryptography</title>

	<meta name="Robots" content="INDEX, FOLLOW">
	<meta http-equiv="Content-Language" content="en">
	<meta http-equiv="Content-Type" content="text/html; CHARSET=UTF-8">
	<meta name="keywords" content="mono">
	<meta name="description" content="Cryptography assemblies and namespaces">
	<meta name="author" content="Jonathan Duncan">
	<meta name="date" content="14-Apr-2004">
	<meta name="modified-by" content="Jonathan Duncan">
	<meta name="modified" content="14-Apr-2004">

	<style type="text/css" media="all"><!--  @import url(/inc/mono-main.css); --></style>
	<style type="text/css" media="all"><!--  @import url(/inc/mono-orange.css); --></style>  <!-- blue=About, green=Using, orange=Contributing -->

<!-- **************************************** -->
<!--  BEGIN SCRIPT HEADER HERE -->
        <script type="text/javascript">
        <!--
        //var pageName;  DISABLED
        //var pageName = "FAQ";  ENABLED
        var pageName = "Roadmap and Plans";
        -->
        </script>
<!--#include virtual="/inc/script_header.inc"-->
<!--  END SCRIPT HEADER HERE -->
<!-- **************************************** -->

</head>
<body>

<div id="thePage"> <!-- Start The Page -->
	    <!-- **************************************** -->
	    <!--  BEGIN RIGHT CONTENT HERE -->
	    <!--#include virtual="/inc/header_orange.html"-->  <!-- blue=About, green=Using, orange=Contributing -->
	    <!--  END RIGHT CONTENT HERE -->
	    <!-- **************************************** -->
	<div id="pageBodyTier2"> <!-- Start Body -->
		<div id="leftNav"> <!-- Start Left Nav -->
				<div id="leftNavTop"></div>
					<!-- **************************************** -->
					<!--  BEGIN LEFT NAV SUB HERE -->
					<!--#include virtual="/inc/leftnav_orange.inc"-->
					<!--  END LEFT NAV HERE -->
					<!-- **************************************** -->

					<!-- **************************************** -->
					<!--  BEGIN SEARCH BOX HERE -->
					<!--#include virtual="/inc/searchbox.inc"-->
					<!--  END SEARCH BOX HERE -->
					<!-- **************************************** -->
		</div> <!-- End Left Nav -->
		<div id="bodyContentTier2"> <!-- Start Body Content -->
			<h1>Cryptography</h1>
			<ul class="head">
				<li><a href="#corlib">Assembly: corlib</a></li>
				<li><a href="#syssec">Assembly: System.Security</a></li>
				<li><a href="#monosec">Assembly: Mono.Security</a></li>
				<li><a href="#monosecwin32">Assembly: Mono.Security.Win32</a></li>
				<li><a href="#mws">Assembly: Microsoft.Web.Services</a></li>
				<li><a href="#tools">Tools</a></li>
				<li><a href="#references">References</a></li>
				<li><a href="#help">How to Help</a></li>
			</ul>

<p>In the .NET framework cryptography can be found under a number of namespaces in several assemblies. Mono also has it's own assemblies to provide missing security functionalities from the .NET framework.</p>

<!-- **************************************** -->
<!--  Assembly: corlib -->
<!-- **************************************** -->
			<a name="corlib"></a>
			<h2>Assembly: corlib</h2>
		<b>Namespace: <b>System.Security.Cryptography</b></b>

			<p>Thanks to the work of many people this namespace is almost complete.</p>

		<p><b>Status</b></p>
			<ul>
				<li>All classes are present. Most of them have (minimal) documentation in <b>monodoc</b>.</li>

				<li>Most classes have their unit tests. Some tests like <code>
						  SymmetricAlgorithmTest</code> are generated by external
						  tools.</li>
			</ul>

	


		<p><b>Namespace: <b>System.Security.Cryptography.X509Certificates</b></b></p>

		<p><b>Status</b></p>
			<ul>
				<li>X.509 certificates are parsed using 100% managed code
						  (using the Mono.Security.ASN1 class). </li>

				<li>Software Publisher Certificates (SPC) used by Authenticode
						  (tm) to sign assemblies are supported and <b>minimally</b>
						  validated.</li>

				<li>Unit tests are generated from a set of existing certificates
						  (about a dozen) each having different properties. Another
						  set of certificates (more than 700) are used for a more
						  complete test (but isn't part of the standard test suite for
						  size and time consideration, i.e. a 7.5Mb C# source file).</li>
			</ul>

		<p><b>Notes</b></p>
			<ul>
				<li>The class Mono.Security.X509.X509Certificate (in Mono.Security
						  assembly) is becoming a much better alternative - and will
						  continue to evolve to support the security tools.</li>

			</ul>


<!-- **************************************** -->
<!--  Assembly: System.Security -->
<!-- **************************************** -->
			<a name="syssec"></a>
			<h2>Assembly: System.Security</h2>
		<p><b>Namespace: <b>System.Security.Cryptography.Xml</b></b></p>

			<p>This namespace implements the <a href="http://www.w3.org/TR/xmldsig-core/">
			XML Digital Signature</a> specification from
			<a href="http://www.w3.org/">W3C</a>.</p>

			<p><b>Status</b></p>
			<ul>
				<li>We pass the fifteen tests from Merlin's xmldsig suite with
						success. Which is funny because Microsoft fails in one case
						where both a X509Certificate and an X509CRL are present in
						an X509Data. We also pass most Phaos tests.

	

				<li>Most classes have their unit tests. Some standalone tests are also in CVS to test C14N and both Merlin and Phaos test suites.
			</ul>


<!-- **************************************** -->
<!--  Assembly: Mono.Security -->
<!-- **************************************** -->
			<a name="monosec"></a>
			<h2>Assembly: Mono.Security</h2>
			<p><b>Rational: </b>
			This assembly provides the missing pieces to .NET security. On Windows
			CryptoAPI is often used to provide much needed functionalities (like
			some cryptographic algorithms, code signing, X.509 certificates). Mono,
			for platform independance, implements these functionalities in 100%
			managed code.</p>

		<p><b>Namespace: Mono.Security</b></p>
			<ul>
				<li>Structures (ASN1, PKCS7) and primitives (PKCS1).
			</ul>
		<p><b>Namespace: Mono.Security.Authenticode</b></p>
			<ul>
				<li>Code signing and verification.
				<li>Support for SPC (Software Publisher Certificate) files and
						  PVK (Private Key) files.
			</ul>
		<p><b>Namespace: Mono.Security.Cryptography</b></p>
			<ul>
				<li>Additional algorithms: MD2, MD4, ARCFOUR (required for SSL)
				<li>Convertion helpers
			</ul>
		<p><b>Namespace: Mono.Security.Protocol.*</b></p>
			<ul>
				<li>Tls: An 100% managed SSLv3 and TLSv1 implementation from
						Carlos Guzman Alvarez.
				<li>Ntlm: NTLM authentication (used for HTTP and SQL Server).
			</ul>
		<p><b>Namespace: Mono.Security.X509.*</b></p>
			<ul>
				<li>X.509 structures (certificate, CRL...) building and decoding.
				<li>PKCS#12 decoding and encoding.

				<li>X.509 extensions (from public X.509 to private PKIX, Netsapce,
						  Microsoft, Entrust...).
			</ul>

			<p><b>Status</b></p>
			<ul>
				<li>A big part of this assembly is also included inside Mono's
						  corlib. The classes are duplicated in this assembly so the
						  functionalities can be used without a dependency on Mono's
						  corlib (which depends on Mono's runtime).

				<li>Unit test coverage isn't (yet) complete.
				<li>Most classes have minimal documentation
				available in <b>monodoc</b>.
			</ul>


<!-- **************************************** -->
<!--  Assembly: Mono.Security.Win32 -->
<!-- **************************************** -->
			<a name="monosecwin32"></a>
			<h2>Assembly: Mono.Security.Win32</h2>
			<p><b>Rational: </b>
			This assembly goal is to provide maximum compatibility with CryptoAPI
			to application running with Mono's runtime on the Windows operating
			system.</p>

			<p><b>This assembly should NEVER be used directly by any application</b>
			(e.g. referecing the assembly from a project).
			The classes should only be used by modifying the <code>machine.config
			</code> configuration file (and then only if this increased
			compatibility is required by an application).</p>

			<p>See the file <code><a href="http://cvs.hispalinux.es/cgi-bin/cvsweb/~checkout~/mcs/class/Mono.Security.Win32/README?rev=1.1&content-type=text/plain&cvsroot=mono">/mcs/class/Mono.Security.Win32/README</a></code>
			for complete instructions.</p>

		<p><b>Namespace: Mono.Security.Cryptography</b></p>

			<p><b>Status</b></p>
			<ul>
				<li>A RNGCryptoServiceProvider built on top of CryptoAPI. 


				<li>Wrapper classes for unmanaged versions of hash algorithms:
						  MD2, MD4, MD5 and SHA1 are supported. <b>note</b>: some
						  algorithms shouldn't be used in new design (MD4 is broken,
						  MD2 and MD5 aren't considered safe for some usage). They are
						  included to preserve interoperability with older applications
						  (e.g. some old, but still valid, X.509 certificates use MD2,
						  MD4 is required for NTLM authentication ...).
			<li>Classes have minimal documentation available in <b>monodoc</b>.
</ul>

			<p><b>TODO</b></p>
			<ul>
				<li>Wrapper classes for unmanaged versions of symmetric
						  encryption algorithms (like DES, TripleDES, RC2 and others
						  present in default CSP).

				<li>Wrapper classes for unmanaged versions of asymmetric
						  algorithms (like DSA and RSA) which persist their keypair
						  into the specified CSP.
			</ul>

			<p><b>Ideas</b></p>
			<ul>
				<li>Similar assemblies (e.g. <code>Mono.Security.XXX</code>)
						  could be created for <a href="http://www.openssl.org">OpenSSL</a>,
						  <a href="http://www.mozilla.org/projects/security/pki/nss/">NSS</a>,
						  <a href="http://www.eskimo.com/~weidai/cryptlib.html">crypto++</a>,
						  <a href="http://www.cryptlib.orion.co.nz/">cryptlib</a> ... for
						  improved performance and/or HSM (Hardware Security Module) support
						  under Linux and/or Windows.
			</ul>

<!-- **************************************** -->
<!--  Assembly: Microsoft.Web.Services -->
<!-- **************************************** -->
			<a name="mws"></a>
			<h2>Assembly: Microsoft.Web.Services</h2>
			<p>Microsoft Web Service Enhancement (WSE), known as Web Service
			Development Kit (WSDK) in it's beta days, is an add-on the .NET
			framework that implements WS-Security (and other WS-* specifications).
			It also includes improved support for XML Signature (replacing and/or
			extending <code>System.Security.Cryptography.Xml</code>) and X.509
			certificates classes.</p>

			<p>Note: WSE is distributed as an add-on because some specifications,
		 	like WS-Security, aren't yet completed by
			<a href="http://www.oasis-open.org/committees/wss/">OASIS</a> or
			other committees.</p>

		<p><b>Namespace: Microsoft.Web.Services.Security</b></p>

			<p><b>Status</b></p>
			<ul>
				<li>Most WSE 1.0 classes are implemented.
			</ul>

			<p><b>TODO</b></p>
			<ul>
				<li>Some classes from System.Security assembly need to be
						duplicated (and somewhat fixed) in WSE for XMLDSIG.

				<li>There are still missing classes and <b>many</b> missing
						unit tests.
			</ul>


		<p><b>Namespace: Microsoft.Web.Services.Timestamp</b></p>

			<p><b>Status</b></p>
			<ul>
				<li>This seems complete for WSE 1.0 but some new classes were
						introduced in WSE 2.0.
			</ul>

		<p><b>Namespace: Microsoft.Web.Services.Security.X509</b></p>

			<p><b>Status</b></p>
			<ul>
				<li>X509Certificate support is complete for both WSE 1.0 and 2.0.
			</ul>

			<p><b>TODO</b></p>
			<ul>
				<li>We need to define certificate stores (for both users and
						  machines). These sames stores must be linked with asymmetric
						  keypairs. This could also be used to store the SPC roots.
			</ul>

		<p><b>Notes</b></p>
			<ul>
				<li>Microsoft has <a href="http://microsoft.com/downloads/details.aspx?FamilyId=21FB9B9A-C5F6-4C95-87B7-FC7AB49B3EDD&displaylang=en">released</a>
						a technical preview of WSE 2. <b>Note that WSDK (the technical
						preview of WSE) had A LOT of changes before it's initial
						release!</b>
			</ul>


<!-- **************************************** -->
<!--  Tools -->
<!-- **************************************** -->
			<a name="tools"></a>
			<h2>Tools</h2>
			<p>There are many tools in the .NET framework that indirectly interacts with some cryptographic classes.
			Unless noted the tools should work on any CLR (tested with both Mono and Microsoft).</p>

			<p><b>Status</b></p>

			<p>The following tools are complete (or mostly complete):</p>
			<ul>
				<li><code>secutil</code> is a tool to extract certificates and
						  strongnames from assemblies in a format that can be easily
						  re-used in source code (C# or VB.NET syntax).

				<li><code>cert2spc</code> is a tool to transform multiple X.509
						   certificates and CRLs into a Software Publisher Certificate
						  (SPC) file - which is a long name for a simple PKCS#7 file.

				<li><code>makecert</code> to create X.509 test certificates that
						  can be used (once transformed in SPC) to sign assemblies. It's
						  now possible to generate SSL certificates for web servers.

				<li><code>sn</code> is a clone of the <code>sn</code> to manage
						  strongnames. Current version can create, convert, sign and
						  verify strongnames signatures. Some configuration options
						  are still missing, some will only work with Mono.

				<li><code>signcode</code> and <code>chktrust</code> for signing
						  and validating Authenticode(tm) signatures on assemblies (or
						  any PE file) are now working (signature and timestamps) but
						  some options aren't yet supported.

				<li><code>setreg</code> can change some cryptographic parameters
						of the runtime. Currently it can add or remove two root test
						certificates (the one used by Mono's <code>makecert</code>,
						the other used by Microsoft's <code>makecert</code>).

				<li><code>certmgr</code> can add and remove certificates from
						the stores. Most common use is to add new trusted certificates
						or remove them.
			</ul>

			<p>Somewhat usable, somewhat incomplete:</p>
			<ul>
				<li><code>certview</code> is a certificate viewer for
						  <code>System.Windows.Forms</code> (right now only working on
						  Windows), while <code>gcertview</code> is the same viewer
						  implemented for Gtk# (working on both Windows and Linux).

						</ul>


			<p><b>TODO</b></p>
			<p>The following tools are still missing or largely incomplete:</p>
			<ul>
				<li>Other tools like a, GUI-based, certificate manager...
			</ul>

			<p>Note that many of the tools requires the class library and/or the
			runtime to be ready for them. E.g. StrongName and Authenticode signatures
			tools are of limited use until supported by the runtime.</p>


<!-- **************************************** -->
<!--  References -->
<!-- **************************************** -->
			<a name="references"></a>
			<h2>References</h2>
			<ul>
				<li>RSA Laboratories' <a href="http://www.rsasecurity.com/rsalabs/node.asp?id=2152">
						Frequently Asked Questions</a> About Today's Cryptography, Version 4.1

				<li>Public-Key Cryptography Standards (<a href="http://www.rsasecurity.com/rsalabs/node.asp?id=2124">
						PKCS</a>)

				<li>National Institute of Standards and Technology - Federal
						Information Processing Standards <a href="http://csrc.nist.gov/publications/fips/index.html">
						NIST FIPS</a>
			</ul>


<!-- **************************************** -->
<!--  How to Help -->
<!-- **************************************** -->
			<a name="help"></a>
			<h2>How to Help</h2>
			<ul>
				<li>Complete any of the TODO (and feel good about it ;-).

				<li>Analyse the current coverage of the unit tests on the
						  cryptographic classes and complete the unit tests. <b><code>
						  monocov</code> does a great job at this! Now we just need to
						  complete the missing unit tests.</b>

				<li>Optimization can also be done on most algorithms as crypto
						  is never fast enough. Some have been done using the
						  Community Edition of BoundChecker (a free VisualStudio
						  addon) - recommanded! Just be sure to test every optimization
						  (using the unit tests) carefully - it's so fast to break an
						  algorithm ;-).

				<li>Write some documentation or add some sample code for the cryptographic classes in
						  <b>monodoc</b>.
			</ul>

			<p><i>Last reviewed: June 26, 2004 (Mono RC1)</i></p>




		</div> <!-- End Body Content -->
		<div class="clear"></div>
	</div> <!-- End Body -->

	<!-- **************************************** -->
	<!--  BEGIN FOOTER HERE -->
	<!--#include virtual="/inc/footer.inc"-->
	<!--  END FOOTER HERE -->
	<!-- **************************************** -->
</div> <!-- End The Page -->

</body>
</html>