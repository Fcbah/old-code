<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
	<title>Test Suite</title>

	<meta name="Robots" content="INDEX, FOLLOW">
	<meta http-equiv="Content-Language" content="en">
	<meta http-equiv="Content-Type" content="text/html; CHARSET=UTF-8">
	<meta name="keywords" content="mono">
	<meta name="description" content="Description of the various kinds of tests in Mono">
	<meta name="author" content="Jonathan Duncan">
	<meta name="date" content="14-Apr-2004">
	<meta name="modified-by" content="Jonathan Duncan">
	<meta name="modified" content="09-Dec-2004">

	<style type="text/css" media="all"><!--  @import url(/inc/mono-main.css); --></style>
	<style type="text/css" media="all"><!--  @import url(/inc/mono-orange.css); --></style>  <!-- blue=About, green=Using, orange=Contributing -->

<!-- **************************************** -->
<!--  BEGIN SCRIPT HEADER HERE -->
        <script type="text/javascript">
        <!--
        //var pageName;  DISABLED
        //var pageName = "FAQ";  ENABLED
        var pageName = "Getting Started";
        -->
        </script>
<!--#include virtual="/inc/script_header.inc"-->
<!--  END SCRIPT HEADER HERE -->
<!-- **************************************** -->
</head>
<body>

<div id="thePage"> <!-- Start The Page -->
	    <!-- **************************************** -->
	    <!--  BEGIN RIGHT CONTENT HERE -->
	    <!--#include virtual="/inc/header_orange.html"-->  <!-- blue=About, green=Using, orange=Contributing -->
	    <!--  END RIGHT CONTENT HERE -->
	    <!-- ************************http://www.go-mono.com/c-sharp.html**************** -->
	<div id="pageBodyTier2"> <!-- Start Body -->
		<div id="leftNav"> <!-- Start Left Nav -->
				<div id="leftNavTop"></div>
					<!-- **************************************** -->
					<!--  BEGIN LEFT NAV SUB HERE -->
					<!--#include virtual="/inc/leftnav_orange.inc"-->
					<!--  END LEFT NAV HERE -->
					<!-- **************************************** -->

					<!-- **************************************** -->
					<!--  BEGIN SEARCH BOX HERE -->
					<!--#include virtual="/inc/searchbox.inc"-->
					<!--  END SEARCH BOX HERE -->
					<!-- **************************************** -->
		</div> <!-- End Left Nav -->
		<div id="bodyContentTier2"> <!-- Start Body Content -->
			<h1>Test Suite</h1>
			<ul class="head">
				<li><a href="#testing">Testing</a></li>
				<li><a href="#unit">Class Library tests</a></li>
				<li><a href="#unittips">Tips on writing Unit tests</a></li>
				<li><a href="#compiler">Compiler tests</a></li>
				<li><a href="#runtime">Runtime tests</a></li>
				<li><a href="#aspnet">ASP.NET tests</a></li>
				<li><a href="#ws">Web Services tests</a></li>
			</ul>

<!-- **************************************** -->
<!--  Testing -->
<!-- **************************************** -->
			<a name="testing"></a>
			<h2>Testing</h2>
			<p>Testing is an important part of the Mono project: every one of its
			three major components has a test suite tailored for its needs.  This
			is very helpful, because in the course of developing the software it
			is very common to introduce bugs in existing code.  A test suite
			helps us fix the bugs as soon as they are introduced.</p>

			<p>There are various kinds of tests in Mono:</p>
			<ul>
				<li><a href="#unit"><b>Class Library Unit
				Tests:</b></a> These are used to test the class
				libraries.</li>

				<li><a href="#compiler"><b>Compiler tests</b></a>: Both
				tests that should pass and tests that should fail are included. </li>

				<li><a href="#runtime"><b>Runtime tests</b></a>: Tests for
				the virtual machine.</li>

				<li><a href="#aspnet"><b>ASP.NET tests</b></a>: ASP.NET tests.</li>

				<li><a href="#ws"><b>Web Services tests</b></a>: Web Services
				client/server tests.</li>


<li>Routine Tests: various test results that are run continously on Mono are available
	at <a
	href="http://www.go-mono.com/tests/index.php">www.go-mono.com/tests/index.php</a>
</li>
			</ul>


<!-- **************************************** -->
<!--  Class Library Tests -->
<!-- **************************************** -->
			<a name="unit"></a>
			<h2>Class Library tests</h2>
			<p>All classes in Mono libraries should have comprehensive unit test
			suites to go with them.  Unit testing is a software engineering
		  	methodology that makes it easier to build correct code.  Every
		  	method in every class should have a set of tests to verify
		  	that they work correctly.  Mono also needs a testing framework
			to make it easy to write and run lots of tests. </p>

			<p>In some classes, we might also provide standalone tests because of
			some reasons such as too huge testcases, another downloading and so on.
			(For example, managed XSLT has standalone test which downloads and
			expands some megabytes of OASIS test suite.)</p>

			<p>Here I list them up as long as I know. If you are going to add another
			standalone tests, please add one line here. It is also recommended that
			you add some notes on how to build and run tests.</p>

			<ul>
				<li>Mono.Data/test/
				<li>System.Data/Test, and some individual ADO.NET libraries:
						  there are some standalone tests. See the bottom of <a href="ado-net.html">
						  ADO.NET page</a> for detail.
				<li>System.Web/Test/TestMonoWeb : see README
				<li>System.Web.Services/Test/standalone : see README
				<li>System.Windows.Forms/SWFTest/
				<li>System.XML/Test/System.Xml/standalone_tests : see README
				<li>System.XML/Test/System.Xml.Schema/standalone_tests : see README
				<li>System.XML/System.Xml.Serialization/standalone_tests/
				<li>System.XML/Test/System.Xml.Xsl/standalone_tests : see README
				<li>Commons.Xml.Relaxng/Test/standalone_tests : see README
			</ul>

			<b>Getting started</b>

			<p>If you are new to writing NUnit tests, there is a template you may use
			to help get started. The file is:</p>

			<p><a href="TemplateTest.cs.html"><b>mcs/class/doc/TemplateTest.cs</b></a></p>

			<p>Save a copy of this file in the appropriate test subdirecty
			(see below), and replace all the {text} markers with
			appropriate code. Comments in the template are there to guide
			you. You should also look at existing tests to see how other
			people have written them.
			<a href="CollectionBaseTest.cs.html">mcs/class/corlib/Test/System.Collections/CollectionBaseTest.cs</a>
			is a small one that might help.</p>

			<p>The directory that will contain your new file depends on the
			assembly/namespace of the class for which you are creating the
			tests.  Under mcs/class there is a directory for each
			assembly. In each assembly there is a Test directory,
			e.g. mcs/class/corlib/Test. In the Test directory there are
			sub-directories for each namespace in the assembly,
			e.g. mcs/class/corlib/Test/Sytem. Put your new test file in
			the appropriate sub-directory under Test for the class you are
			testing.</p>

			<p>Once all of that is done, you can do a 'make test' from the top mcs
			directory.  Your test class needs also to be listed in the
			.sources file at the top of the Test directory.</p>


<!-- **************************************** -->
<!--  Tips on writing Unit tests -->
<!-- **************************************** -->
			<a name="unittips"></a>
			<h2>Tips on writing Unit tests</h2>
			You should look at the <a href="http://nunit.org">NUnit documentation</a>,
			as it is a fantastic product, and includes fantastic documentation,
			but here are some tips for those of you who are already reading
			this web page.

			<p><b>Provide an unique error message for Assert()</b></p>

			<p>Include an unique message for each Assert() so that when the assert
			fails, it is trivial to locate it in the source. Otherwise, it may be
			difficult to determine which part of the test is failing. A good way
			to ensure unique messages is to use something like #A01, #A02 etc.</p>

			<p>Ok:</p>
<pre>
	AssertEquals("array match", compare[0], i1[0]);
	AssertEquals("array match", compare[1], i1[1]);
	AssertEquals("array match", compare[2], i1[2]);
	AssertEquals("array match", compare[3], i1[3]);
</pre>

			<p>Excellent:</p>
<pre>
	AssertEquals("#A01", compare[0], i1[0]);
	AssertEquals("#A02", compare[1], i1[1]);
	AssertEquals("#A03", compare[2], i1[2]);
	AssertEquals("#A04", compare[3], i1[3]);
</pre>

			<p>Once you used such a number in an Assert(), don't change it later on -
			people might use it it identify the test in bug reports or in mailing
			lists.</p>

			<p><b>Use AssertEquals() to compare things, not Assert().</b></p>

			<p>Do not compare two values with Assert() - if the test fails,
			people have no idea what went wrong while AssertEquals()
			reports the failed value.</p>

			<p>Ok:</p>
<pre>
	Assert ("A01", myTicks[0] == t1.Ticks);
</pre>

			<p>Excellent:</p>
<pre>
	AssertEquals ("A01", myTicks[0], t1.Ticks);
</pre>

			<p><b>Test your test with the Microsoft runtime</b></p>

			<p>If possible, try to run your testsuite with the Microsoft runtime on
			.NET on Windows and make sure all tests in it pass. This is especially
			important if you're writing a totally new testcase - without this
			check you can never be sure that your testcase contains no bugs ....</p>

			<p>Don't worry if you're writing your test on Linux, other people can
			test it for you on Windows.</p>

			<p>Sometimes you may discover that a test doesn't show the expected
			result when run with the Microsoft runtime - either because there is a
			bug in their runtime or something is misleading or wrong in their
			documentation. In this case, please put a detailed description of the
			problem to mcs/class/doc/API-notes and do also report it to the
			<a href="/about/mailing-lists.html">mailing list</a> - we'll forward this to the
			Microsoft people from time to time to help them fix their documentation
			and runtime.</p>

			<p><b>Unit tests.</b></p>

			<p>Why do unit testing? It becomes simple to run automated tests
			for the whole library. Unit tests are a safety net - you can
			change part of the code and verify that you haven't broken
			anything. Ideally, tests are written before the actual library
			code itself. And every time a bug is discovered, a test should
			be written to demonstrate the bug and its fix. Then, if
			you ever reintroduce the bug, you will know immediately. For
			more info, read <a
			href="http://junit.sourceforge.net/doc/testinfected/testing.htm">
			JUnit Test Infected: Programmers Love Writing Tests</a>.</p>

			<p><b>Getting Started</b></p>

			<p>We welcome all contributions to the Class Libary Test Suite.</p>

			<p>There is information to help you get started in CVS at
			mcs/class/doc/NUnitGuidelines. Once you have written your test, please
			post it to <a href="/about/mailing-lists.html">mono-list</a>.</p>

			<p>Someone will make sure to add the file or apply the patch as
			appropriate. If you plan to be an on-going contributor and
			would like to get cvs account, email <a href="mailto:miguel@ximian.com">miguel</a>.</p>

			<p>Normally, after you send a couple of well-written new files
			and/or patches to the list, you will be given cvs access.</p>


<!-- **************************************** -->
<!--  Compiler tests -->
<!-- **************************************** -->
			<a name="compiler"></a>
			<h2>Compiler tests</h2>
			<p>Mono ships with three compilers: C#, VB.NET and JScript.  The
			tests are ran by running the makefile target `make
			run-test-local' in the appropriate directory.</p>

			<p>The C# compilation tests live in mcs/tests, and the C# error
			tests live in mcs/errors.</p>

			<p>The VB.NET compilation tests live in mcs/btests. </p>

<!-- **************************************** -->
<!--  Runtime tests -->
<!-- **************************************** -->
			<a name="runtime"></a>
			<h2>Runtime tests</h2>
			<p>These tests verify the virtual machine, to run these tests, do:</p>

<pre>
	cd mono/mono/tests
	make test
</pre>

<!-- **************************************** -->
<!--  ASP.NET tests -->
<!-- **************************************** -->
			<a name="aspnet"></a>
			<h2>ASP.NET tests</h2>
			<p>XSP, the Mono ASP.NET server has tests for ASP.NET pages. It uses
			<a href="http://nunitasp.sourceforge.net">NUnitAsp</a>. Right now
			it only has standalone tests, ie., tests that do not need their own
			global.asax or web.config files.</p>

			<p>If you want to run them, get the xsp CVS module and install it. Then:</p>
<pre>
	cd xsp/nunit-tests
	make
	cd standalone
	xsp
</pre>

			<p>And from another terminal:</p>
<pre>
	cd xsp/nunit-tests/standalone
	nunit-console standalone-tests.dll
</pre>

<!-- **************************************** -->
<!--  Web Services tests -->
<!-- **************************************** -->
			<a name="ws"></a>
			<h2>Web Services tests</h2>
			<p>The Test directory for the System.Web.Services assembly contains a
			standalone test suite for testing web services. It tests:</p>

			<ul>
				<li>Proxy generation using the wsdl tool</li>
				<li>Access to web services using the generated client proxies</li>
				<li>Execution of web services in the server</li>
			</ul>

			<p>This suite not only tests web services running on XSP, but it can also test
			services running on other platforms and that are available in internet. This
			will help track down interoperability issues.</p>

			<p>To build the test suite, just run:</p>

<pre>
	cd mcs/class/System.Web.Services/Test/standalone
	xsp --root server
</pre>

			<p>And from another terminal:</p>
<pre>
	cd mcs/class/System.Web.Services/Test/standalone
	make
	nunit-console testclient.dll
</pre>

			<p>This will download the wsdl documents, generate the proxies, build a dll with
			the proxies, and build the nunit tests. Then you can use nunit-console or
			gnunit to run the tests (the nunit dll is testclient.dll).</p>

			<p>Read the README file in mcs/class/System.Web.Services/Test/standalone for
			more info.</p>




		</div> <!-- End Body Content -->
		<div class="clear"></div>
	</div> <!-- End Body -->

	<!-- **************************************** -->
	<!--  BEGIN FOOTER HERE -->
	<!--#include virtual="/inc/footer.inc"-->
	<!--  END FOOTER HERE -->
	<!-- **************************************** -->
</div> <!-- End The Page -->

</body>
</html>