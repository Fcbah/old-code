<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
	<title>Howto Info</title>

	<meta name="Robots" content="INDEX, FOLLOW">
	<meta http-equiv="Content-Language" content="en">
	<meta http-equiv="Content-Type" content="text/html; CHARSET=UTF-8">
	<meta name="keywords" content="mono">
	<meta name="description" content="How to contribute">
	<meta name="author" content="Jonathan Duncan">
	<meta name="date" content="14-Apr-2004">
	<meta name="modified-by" content="Jonathan Duncan">
	<meta name="modified" content="14-Apr-2004">

	<style type="text/css" media="all"><!--  @import url(/inc/mono-main.css); --></style>
	<style type="text/css" media="all"><!--  @import url(/inc/mono-orange.css); --></style>  <!-- blue=About, green=Using, orange=Contributing -->

<!-- **************************************** -->
<!--  BEGIN SCRIPT HEADER HERE -->
<!--#include virtual="/inc/script_header.inc"-->
<!--  END SCRIPT HEADER HERE -->
<!-- **************************************** -->
</head>
<body>

<div id="thePage"> <!-- Start The Page -->
	    <!-- **************************************** -->
	    <!--  BEGIN RIGHT CONTENT HERE -->
	    <!--#include virtual="/inc/header_orange.html"-->  <!-- blue=About, green=Using, orange=Contributing -->
	    <!--  END RIGHT CONTENT HERE -->
	    <!-- **************************************** -->
	<div id="pageBodyTier2"> <!-- Start Body -->
		<div id="leftNav"> <!-- Start Left Nav -->
				<div id="leftNavTop"></div>
					<!-- **************************************** -->
					<!--  BEGIN LEFT NAV SUB HERE -->
					<!--#include virtual="/inc/leftnav_orange.inc"-->
					<!--  END LEFT NAV HERE -->
					<!-- **************************************** -->

					<!-- **************************************** -->
					<!--  BEGIN SEARCH BOX HERE -->
					<!--#include virtual="/inc/searchbox.inc"-->
					<!--  END SEARCH BOX HERE -->
					<!-- **************************************** -->
		</div> <!-- End Left Nav -->
		<div id="bodyContentTier2"> <!-- Start Body Content -->
			<h1>Howto Info</h1>
			<ul class="head">
				<li>&gt;&nbsp; <a href="#newbie">A little help for mono newbie coders</a></li>
				<li>&gt;&nbsp; <a href="#nunit">The NUnit Tests Guidelines document</a></li>
				<li>&gt;&nbsp; <a href="#start">Getting Started</a></li>
				<li>&gt;&nbsp; <a href="#assert">Tips: Assert messages</a></li>
				<li>&gt;&nbsp; <a href="#assertequals">Tips: AssertEquals vs Assert</a></li>
				<li>&gt;&nbsp; <a href="#constructors">Tips: Constructors</a></li>
				<li>&gt;&nbsp; <a href="#namespace">Tips: Namespace</a></li>
				<li>&gt;&nbsp; <a href="#testing">Tips: Testing</a></li>
			</ul>

<!-- **************************************** -->
<!--  A little help for mono newbie coders -->				
<!-- **************************************** -->
			<a name="newbie"></a>
			<h2>A little help for mono newbie coders</h2>
			<p>For those who are new to Mono and are impatient to contribute
			with code (uhh... you are brave!!) here is the document you 
			should read.</p>
			
			<p>You will see all Mono hackers say the same (great minds have
			similar way of thinking): First, DO WRITE TESTS!!!. In order
			to do that:</p>
			
			<ul>
				<li>Start with the NUnit Tests Guidelines.  In the cvs
					    	  they are located at: mcs/class/doc/NUnitGuideli...
				<li>But wait, this is a document for impatient
					    	  people. So EVERYTHING should be here. Well, it is. 
			</ul>


<!-- **************************************** -->
<!--  The NUnit Tests Guidelines document -->				
<!-- **************************************** -->
			<a name="nunit"></a>
			<h2>The NUnit Tests Guidelines document</h2>
			<p><i>Mono NUnit Test Guidelines and Best Practices<br>
			
			Authors: Nick Drochak  <ndrochak@gol.com>
			Martin Baulig  <martin@gnome.org>
			Last Update: 2002-03-02
			Rev: 0.3</i></p>
			
			<p><b>Purpose</b><br>
			This document captures all the good ideas people have had about writing NUnit tests for the mono project. This document will be useful for anyone who writes or maintains unit tests. </p>

			<p><b>Other resources</b><br>
			- mcs/class/README has an explanation of the build process and how it relates to the tests. <br>
			- http://nunit.sourceforge.net is the place to find out about NUnit </p>


<!-- **************************************** -->
<!--  Getting Started -->				
<!-- **************************************** -->
			<a name="start"></a>
			<h2>Getting Started</h2>
			<p>If you are new to writing NUnit tests, there is a template you may use to help get started. The file is: </p>
			
			<a href="javascript:openExternal('TemplateTest.cs.html', 700, 600, 'scroll')"><p>mcs/class/doc/TemplateTest.cs </p>
			
			<p>(2.- This is the point two!. Just a reminder to copy/paste this file it in another buffer. And keep
			reading.  You can get it here or at the end of the guidelines in the Testing Tips section)</p></a>
			
			<p>Save a copy of this file in the appropriate test subdirecty (see below), and replace all the [text] markers with appropriate 
			code. Comments in the template are there to guide you. You should also look at existing tests to see how other people have 
			written them.</p>
			
			<a href="javascript:openExternal('CollectionBaseTest.cs.html', 700, 600, 'scroll')">
			<p>mcs/class/corlib/Test/System.Collections/CollectionBaseTest.cs </p></a>
			
			<p>is a small one that might help. </p>
			
			<a href="javascript:openExternal('CollectionBaseTest.cs.html', 700, 600, 'scroll')"><p>(3.- You reached the third point. And as 
			expected, it's just here to tell you that the content of CollectionBaseTest.cs, like the
			TemplateTest.cs code, is available here or at the end of these guidelines.) </p></a>
			
			<p>The directory that will contain your new file depends on the assembly/namespace of the class for which you are creating the 
			tests. Under mcs/class there is a directory for each assembly. In each assembly there is a Test directory, e.g. 
			mcs/class/corlib/Test. In the Test directory there are sub-directories for each namespace in the assembly, e.g. 
			mcs/class/corlib/Test/Sytem. Put your new test file in the appropriate sub-directory under Test for the class you are 
			testing.</p>
			
			<p>Once your test class is complete, you need to add it to the AllTests.cs file in the same directory as your new test. Add a 
			call to "suite.AddTest()" passing the name of your new test class's suite property as the parameter. You will see examples in 
			the AllTests.cs file, so just copy and paste inside there. </p>
			
			<p>Once all of that is done, you can do a 'make test' from the top mcs directory. Your test class will be automagically 
			included in the build and the tests will be run along with all the others.</p>


<!-- **************************************** -->
<!--  Tips: Assert messages -->				
<!-- **************************************** -->
			<a name="assert"></a>
			<h2>Provide an unique error message for Assert()</h2>
			
			<p>Include an unique message for each Assert() so that when the 
			assert fails, it is trivial to locate the failing one. 
			Otherwise, it may be difficult to determine which part of the 
			test is failing. A good way to ensure unique messages is to use 
			something like #A01, #A02 etc.</p>
			
		    <p>Bad:</p>
<pre>
	AssertEquals("array match", compare[0], i1[0]);
	AssertEquals("array match", compare[1], i1[1]);
	AssertEquals("array match", compare[2], i1[2]);
	AssertEquals("array match", compare[3], i1[3]);
</pre>
    		<p>Good:</p>
<pre>
	AssertEquals("#A01", compare[0], i1[0]);
	AssertEquals("#A02", compare[1], i1[1]);
	AssertEquals("#A03", compare[2], i1[2]);
	AssertEquals("#A04", compare[3], i1[3]);
</pre>
			<p>Once you used such a number in an Assert(), don't change it 
			later on - people might use it it identify the test in bug 
			reports or in mailing lists.</p>

<!-- **************************************** -->
<!--  Tips: AssertEquals vs Assert -->				
<!-- **************************************** -->
			<a name="assertequals"></a>
			<h2>Use AssertEquals() to compare things, not Assert()</h2>
			<p>Never compare two values with Assert() - if the test fails, 
			people have no idea what went wrong while AssertEquals() 
			reports the failed value.</p>
			
    	<p>Bad:</p>
<pre>
        Assert ("A01", myTicks[0] == t1.Ticks);
</pre>
    	<p>Good:</p>
<pre>
        AssertEquals ("A01", myTicks[0], t1.Ticks);
</pre>
			
<!-- **************************************** -->
<!--  Tips: Constructors -->				
<!-- **************************************** -->
			<a name="constructors"></a>
			<h2>Constructors</h2>			
			<p>When writing your testcase, please make sure to provide a 
			constructor which takes no arguments:</p>
<pre>
public class DateTimeTest : TestCase
{

        public DateTimeTest() : base ("[MonoTests.System.DateTimeTest]") {}
        public DateTimeTest (string name): base(name) {}

	public static ITest Suite
        {
                get {
                        TestSuite suite = new TestSuite ();
			return suite;
		}
	}
}
</pre>

<!-- **************************************** -->
<!--  Tips: Namespace -->				
<!-- **************************************** -->
			<a name="namespace"></a>
			<h2>Namespace</h2>
			<p>Please keep the namespace within each test directory
			consistent - all tests which are referenced in the same
			AllTests.cs must be in the same namespace. Of course you can
			use subnamespaces as you like - especially for subdirectories
			of your testsuite.
			
			For instance, if your AllTests.cs is in namespace "MonoTests"
			and you have a subdirectory called "System", you can put all
			the tests in that dir into namespace "MonoTests.System".</p>
			
<!-- **************************************** -->
<!--  Tips: Testing -->				
<!-- **************************************** -->
			<a name="testing"></a>
			<h2>Test your test with the microsoft runtime</h2>
			<p><a href="javascript:openExternal('TemplateTest.cs.html', 700, 600, 'scroll')"><b>TemplateTest.cs</b><br>
			Here is an NUnit test template</p></a>
			
			<p><a href="javascript:openExternal('CollectionBaseTest.cs.html', 700, 600, 'scroll')"><b>CollectionBaseTest.cs</b><br>
			And here is a sample existing test to learn from</p></a>
			
			<p>If possible, try to run your testsuite with the Microsoft
			runtime on Windows and make sure all tests in it pass. This is
			especially important if you're writing a totally new testcase
			- without this check you can never be sure that your testcase
			contains no bugs ....
			
			Don't worry if you're writing your test on Linux, other people
			can test it for you on Windows.
			
			Sometimes you may discover that a test doesn't show the
			expected result when run with the Microsoft runtime - either
			because there is a bug in their runtime or something is
			misleading or wrong in their documentation. In this case,
			please put a detailed description of the problem to
			mcs/class/doc/API-notes and do also report it to the list -
			we'll forward this to the Microsoft people from time to time
			to help them fix their documentation and runtime.</p>
			
			<p></p>
			
			<ul>
				<li>If you use Emacs, you might want to use the .emacs 
						  file and the package developed by Brad Merrill 
						  mailto:zbrad@cybercom.net. It will allow you to 
						  highlight and indent in C# style in your Emacs
						  editor. (XEmacs will still work but it'll also 
						  complain).
				<p>
				<li>CSharpDevelop is a GPLed IDE developed by IC#Code. 
						  Search for it at sourceforge if you are interested 
						  in it.
				<p>
				<li>For those who Java: "A comparison of Microsoft's 
						  C# programming language to Sun Microsystem's Java 
						  Programming language" by Dare Obasanjo is a really good 
						  (very complete) text to read. 
				<p>
				<li>Suggest this point and more, now I can't think of 
						  anything more.
			</ul>
		
			<p>Enjoy!!.</p>
		
			<p><i>(c) 2002, <a href="mailto:jaime@geneura.ugr.es">Jaime Anguiano Olarra</a>.</i></p>
		
			<p><i>The parts included in this document are property of their 
			respective authors.</i></p>
		
			<p><i>Note: The identation of the source code has been changed a bit
			so it could fit better in the website. Anyway, as nothing more
			changed, the files should work as expected.</i></p>
			
			
			
		</div> <!-- End Body Content -->
		<div class="clear"></div>
	</div> <!-- End Body -->

	<!-- **************************************** -->
	<!--  BEGIN FOOTER HERE -->
	<!--#include virtual="/inc/footer.inc"-->
	<!--  END FOOTER HERE -->
	<!-- **************************************** -->
</div> <!-- End The Page -->

</body>
</html>
