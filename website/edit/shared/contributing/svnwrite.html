<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
	<title>SVN Write Access</title>

	<meta name="Robots" content="INDEX, FOLLOW">
	<meta http-equiv="Content-Language" content="en">
	<meta http-equiv="Content-Type" content="text/html; CHARSET=UTF-8">
	<meta name="keywords" content="mono">
	<meta name="description" content="SVN Access for developers">
	<meta name="author" content="Jonathan Duncan">
	<meta name="date" content="14-Apr-2004">
	<meta name="modified-by" content="Jonathan Duncan">
	<meta name="modified" content="09-Dec-2004">

	<style type="text/css" media="all"><!--  @import url(/inc/mono-main.css); --></style>
	<style type="text/css" media="all"><!--  @import url(/inc/mono-orange.css); --></style>  <!-- blue=About, green=Using, orange=Contributing -->

<!-- **************************************** -->
<!--  BEGIN SCRIPT HEADER HERE -->
        <script type="text/javascript">
        <!--
        //var pageName;  DISABLED
        //var pageName = "FAQ";  ENABLED
        var pageName = "Getting Started";
        -->
        </script>
<!--#include virtual="/inc/script_header.inc"-->
<!--  END SCRIPT HEADER HERE -->
<!-- **************************************** -->

</head>
<body>

<div id="thePage"> <!-- Start The Page -->
	    <!-- **************************************** -->
	    <!--  BEGIN RIGHT CONTENT HERE -->
	    <!--#include virtual="/inc/header_orange.html"-->  <!-- blue=About, green=Using, orange=Contributing -->
	    <!--  END RIGHT CONTENT HERE -->
	    <!-- **************************************** -->
	<div id="pageBodyTier2"> <!-- Start Body -->
		<div id="leftNav"> <!-- Start Left Nav -->
				<div id="leftNavTop"></div>
					<!-- **************************************** -->
					<!--  BEGIN LEFT NAV SUB HERE -->
					<!--#include virtual="/inc/leftnav_orange.inc"-->
					<!--  END LEFT NAV HERE -->
					<!-- **************************************** -->

					<!-- **************************************** -->
					<!--  BEGIN SEARCH BOX HERE -->
					<!--#include virtual="/inc/searchbox.inc"-->
					<!--  END SEARCH BOX HERE -->
					<!-- **************************************** -->
		</div> <!-- End Left Nav -->
		<div id="bodyContentTier2"> <!-- Start Body Content -->
			<h1>SVN Write Access</h1>
			<ul class="head">
				<li><a href="#access">SVN Access</a></li>
				<li><a href="#policies">Policies</a></li>
				<li><a href="#usesvn">Using SVN</a></li>
				<li><a href="#changes">Keeping track of changes</a></li>
			</ul>

<!-- **************************************** -->
<!--  SVN Access -->
<!-- **************************************** -->
			<a name="access"></a>
			<h2>SVN Access</h2>
			<p>Here we describe how one obtains commit access to the Mono SVN
			repository and the responsibilities that come with that access
			privilege.
<!--
			These only apply to the Mono SVN repository, and not to the <a
			href="http://forge.novell.com/modules/xfmod/community/?monocomm">Mono
			Community</a> repositories at Novell Forge.</p>
-->
		<p><b>What is SVN?</b></p>

			<p>Briefly, SVN is a system tool used to store and maintain files and
			a history of their changes over time. The Mono source code and related
			files are kept on a SVN server at Ximian. More on SVN at
			<a href="http://subversion.tigris.org/">subversion.tigris.org</a>
			</p>

		<p><b>What Access?</b></p>

			<p>We mean "commit" access. This is the privilege to make permanent
			changes to the Mono source code and related files. You need an account
			created by the SVN server administrator in order to commit changes to
			the files on that server.</p>

		<p><b>How Does One Obtain Access?</b></p>

			<p>Any active Mono developer can get a SVN account. Normally one is
			considered an 'active' developer after sending several patches to the
			mailing lists and/or bugzilla for review.</p>

			<p>If you are not a developer, but want to access the latest sources,
			please see the <a href="anonsvn.html">AnonSVN</a>
			instructions.  If you are not a direct contributor to Mono,
			but want to host your .NET or Mono-based project, you can use
			<a href="forge.html">Novell Forge</a>.</p>


			<p>If you feel you are ready for a SVN account send an e-mail to
			<a href="mailto:miguel@ximian.com">miguel</a> with your public
			<a href="#keygen">OpenSSH</a>
			key for this purpose.</p>


<!-- **************************************** -->
<!--  Policies -->
<!-- **************************************** -->
			<a name="policies"></a>
			<h2>Policies</h2>
			<p>It is necessary that everyone with SVN commit access respect and
			adhere to the following rules. If you ask for and are granted SVN
			access, you are agreeing to follow these policies.</p>

		<p><b>Code License</b></p>

			<p>If you are about to commit code to a module, the code that is
			being committed should be released under the same license as
			the code that the module has.</p>

			<p>Check the license if you are unsure, but it is basically:
			class libraries X11; compiler and tools: GPL; runtime: LGPL.</p>

			<p>If in doubt, check with the maintainers of the module, or send
			mail to mono-hackers-list@ximian.com.</p>

		<p><b>Changing code</b></p>

			<p>Even if you have SVN commit access, that doesn't mean you can change
			code at will in any directory or module. Directories and Namespaces
			have a sort of unofficial ownership. If you are not the owner of a
			piece of code and you want to make changes/fixes to it, there are two
			cases.
			<ol>
				<li>The change is a typo fix or a one-liner build or trivial fix. In
				this case almost anyone can commit (always remembering to add the
				proper changelog entry to explain the change). We say "almost anyone",
				because changes to certain directories almost always should be reviewed
				first. Such as changes to core stuff: corlib/System, System.Collections,
				mini/, metadata/, System.IO.</li>

				<li>The change is larger. In this case the patch *must* be sent to
				mono-devel-list for review by the owner of the code and by the other
				hackers. Always submit such patches to the list or bugzilla, although
				you may put the owner of the code in the CC header. Hackers come and go.
				Mailing a patch to only a personal address is a good way to get the
				patch forgotten and missed. Plus, getting the patches reviewed as well
				as reviewing them, is a good thing, so try to get used to it.</li>
			</ol>

			<p>Note: If the patch is an addition of code and doesn't change any of the
			existing code, the rules are slightly relaxed: there is more freedom
			in committing such changes, if they don't interfere with the existing
			codebase.</p>

		<p><b>Owning Code</b></p>

			<p>Now, how do you get to be the owner of a chunk of code? The answer is
			simple. You wrote the code, so you're the unofficial owner. There is
			also another way. After sending a few patches for the code, the
			owner (or the core developers of mono, if the owner somehow disappeared)
			trusts you and tells you you're free to commit without getting his
			review first.</p>


			<p>Here is a (partial) list of namespaces/directories with their owners:</p>
			<ul>
		        <li>Debugger module and debug code in mono: martin
		        <li>mcs compiler: miguel, martin, ravi
		        <li>Reflection/Reflection.Emit: lupus, zoltan
		        <li>IO-layer: dick
		        <li>mini: lupus, dietmar
		        <li>test suite: nickd (though anyone should feel free to add test cases)
		        <li>System.IO: dick, ville
		        <li>security stuff: spouliot
		        <li>ilasm: jackson
		        <li>System.Web and related: gonzalo
		        <li>System.Xml: eno, piers
		        <li>Remoting: dietmar, lluis
		        <li>interop/marshal: dietmar
		        <li>threads: dick
			</ul>

			<p>If you are the owner of a piece of code, feel free to commit code, and
			delegate the work to others.</p>

			<p>But, if you're not the owner of the code, committing a rewrite without
			getting a review first is not good svnitizenship (especially when the
			rewrite claimed to fix bugs, but not a single regression test has been
			added to the suite).</p>

		<p><b>Commit Rules</b></p>

			<p>Once you know you can commit a patch (because of the rules above) there
			are a few other small rules to follow:</p>
			<ul>
				<li>Always add a changelog entry with a meaningful explanation
				<li>If you fix a bug, add a regression test for it in the regression
				suite
				<li>Don't commit unrelated changes together with a fix: do fine-grained
				commits
				<li>Always check what you're committing: make sure you're only committing
				what you need and make sure you don't change line endings and
				whitespace. Do a <i>svn diff</i> of the files you're going to commit and
				check the changes.
				<li>Don't do reformatting commits, unless you're the original author of
				the code
				<li>When fixing bugs, don't follow the documentation blindly, it may
				well be wrong. Test the behavior on the MS runtime or ask on the list
				for discussion if unsure. Don't be afraid of having your changes
				reviewed.
				<li>Never remove copyright notices from the code
				<li>Never remove licensing info from code
				<li>Never commit code you didn't write yourself or code that doesn't
				have a suitable license
				<li>Follow the style conventions
				<li>Keep an eye on performance considerations, especially for code in
				core classes, ask on the list for guidance
				<li>Do a regression test run and a bootstrapping build if making changes
				to core functionality before committing. Do not commit code that would
				break the compile, because that wastes everybody's time.  Two things
				are important in this step: trying to build your sources and making
				sure that you add all the new files before you do a commit.
			</ul>

			<p>Also, remember to pat yourself on the back after the commit, smile and
			think we're a step closer to a better free software world.</p>


<!-- **************************************** -->
<!--  Using SVN -->
<!-- **************************************** -->
			<a name="usesvn"></a>
			<h2>Using SVN</h2>
			This is a small tutorial for using SVN.

		<a name="#keygen"></a>
		<p><b>Generating an SSH key</b></p>

			<p>If you are using SSH version 2, please generate your key using:</p>

<pre>
	ssh-keygen -t rsa
</pre>

			<p>And mail <a href="mailto:miguel@ximian.com">miguel</a> the
			id_rsa.pub file.</p>

			<p>If you are using SSH version 1, run:</p>
<pre>
	ssh-keygen
</pre>

			<p>And mail <a href="mailto:miguel@ximian.com">miguel</a> your
			identity.pub file.</p>

			<p>If you are using SSH from SSH Communications Security (they offer
			a free SSH client for personal use), you have to use OpenSSH to
			convert your public key to the required format. You have to use
			OpenSSH's ssh-keygen program and write the following:</p>

<pre>
	ssh-keygen -i -f id_XXX.pub > my_public_key.pub
</pre>

			<p>where the file id_XXX.pub is your public key file,
			normally located under ~/.ssh/ or ~/.ssh2/.
			Send to <a href="mailto:miguel@ximian.com">miguel</a> the
			my_public_key.pub file. </p>

			<p>The *exact* format for this file must be:</p>

<pre>
	ssh-rsa XXXXX....
</pre>

			<p>You will need SVN and SSH.  Windows users can get both by
			installing Cygwin (<a
			href="http://www.cygwin.com">http://www.cygwin.com</a>)</p>

			<p>UNIX users will probably have those tools installed already.</p>

		<p><b>Checking out the sources</b></p>

			<p>To check out the sources for the first time from the
			repository, use this command:</p>

<pre>
	svn co svn+ssh://USERNAME@mono-cvs.ximian.com/source/trunk/MOD
</pre>
			where USERNAME is, guess what?, and MOD is the module name.
			Consider using <i>ssh-agent</i> if you get annoyed by ssh
			asking for a password.

		<p><b>Updating your sources</b></p>

			<p>Every day people will be making changes, to get your latest
			updated sources, use:</p>

<pre>
	svn update mcs mono
</pre>

		<p><b>Making patches</b></p>

			<p>Usually you will want to make a patch to contribute, and let
			other people review it before committing it.  To obtain such a
			"patch", you type:</p>

<pre>
	cd directory-you-want-to-diff
	svn diff > file.diff
</pre>
			<p>and then mail that file.diff to <a href="/about/mailing-lists.html">
			mono-devel-list</a>.

		<p><b>Committing your work</b></p>

			<p>Once you get approval to commit to the SVN repository, or if you are
			committing code that you are the maintainer of, you will want
			to commit your code. </p>

			<p>To do this, you have to "add" any new files that you created:</p>

<pre>
	svn add new-file.cs
</pre>

			<p>And then commit your changes to the repository:</p>

<pre>
	svn commit file-1.cs file-2.cs
</pre>
			<p>Don't forget to provide a <b>ChangeLog</b> detailing your changes.</p>


<!-- **************************************** -->
<!--  Keeping track of changes -->
<!-- **************************************** -->
			<a name="changes"></a>
			<h2>Keeping track of changes</h2>
			<p>We provide two e-mail based mechanisms to keep track of
			changes to the code base:</p>

			<ul>
				<li><a href="mailto:mono-patches-request@ximian.com">
						  mono-patches@ximian.com</a>: This mailing list receives
						  in patch form all the changes that are being made to the
						  SVN.</li>

				<li><a href="mailto:mono-cvs-list-request@ximian.com">
						  mono-cvs-list@ximian.com</a>: This mailing list only
						  receives the SVN commit logs with a list of files
						  modified.</li>
			</ul>

			<p>We hope to offer LXR and Bonsai in the future as well.</p>

			<p>To subscribe, send an email message to
			mono-cvs-list-request@ximian.com and in the body of the
			message put `subscribe'.</p>

			<p>This will send you an email message every time a change is
			made to the SVN repository, together with the information that
			the author of the changes submitted.</p>

			<p>You might also want to track the live changes, subscribe to
			the <a
			href="mailto:mono-patches-request@ximian.com">mono-patches@ximian.com</a>
			to receive the patches as they are checked into SVN.</p>




		</div> <!-- End Body Content -->
		<div class="clear"></div>
	</div> <!-- End Body -->

	<!-- **************************************** -->
	<!--  BEGIN FOOTER HERE -->
	<!--#include virtual="/inc/footer.inc"-->
	<!--  END FOOTER HERE -->
	<!-- **************************************** -->
</div> <!-- End The Page -->

</body>
</html>