<?xml version="1.0" encoding="utf-8"?>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:monodoc="http://www.go-mono.org/xml/monodoc">
<head>
	<title>Google API</title>

	<meta name = "DC.Description" content = "" />
	<meta name = "DC.Contributor" content = "Johannes Roith" />

	<link rel="stylesheet" type="text/css" href="../style.css" />

	<meta name = "CVS.English.Version" content = "1.6" />
</head>
<body>

Today there are only few web services around. One of the most useful ones is the Google WebService.
<br />
It is powerful enough to build a complete Search engine GUI with it. We will only pick a very simple function: 
<p />The Google Spell checker.<p />

When you enter "spelll checker" in Google, it will ask you if you meant "spell checker". 
With the WebService, you can use that function directly.
<h3>First Steps: Creating the "local" stub</h3>

Maybe you have already  read the <a href="webservicesintroduction.html">Introduction</a>. Then you know, that we need 
a local stub library, that matches the webservice interfaces and is "the man in the middle", i.e. your app will 
communicate with the stub, while the stub will communicate with the WebServer hosting the service.
<p>
I also mentioned, that you don't have to write that stub yourself. You have to download a WSDL file, hand it to the mono 
WSDL tool, that will generate the code.
</p>

<p>
You can get the Google WSDL files here: <a href="GoogleSearch.wsdl">GoogleSearch.wsdl</a>.
</p>
to generate the C# stub source type:
<pre class="console">
wsdl GoogleSearch.wsdl
</pre>
This will result in GoogleSearchService.cs<br />
Compile with:
<pre class="console">
mcs /target:library GoogleSearchService.cs
</pre>
Now you have the final stub assembly: <b>GoogleSearchService.dll</b>
<h3>Google License key</h3>
Google does lock the web service with a special key. You can obtain a key here:<br /> 
<a href="https://www.google.com/accounts/NewAccount">https://www.google.com/accounts/NewAccount</a>
<p />
This key allows ~ 50 actions per day. You must replace my sample key with yours.
<h3>Application 1: The Google SpellChecker on a Webpage</h3>

We will start by using the spell checker on a simple web page.
<p />
First you will have to drop the stub GoogleSearchService.dll in your ASP.NET bin dir. The example is very simple to understand. 
<pre class="code">
<span style="color: #0000FF">&lt;%@ Page Language="C#" %&gt;</span>
<span style="color: #0000FF">&lt;script runat="Server"&gt;</span>

void Page_Load(object sender, EventArgs e) {
    
	// Your license key
	const string licensekey = "FCszK/FQFHJWQE1n5OkeGmZAWzCFY5+7";
	
	// Create a Google Search object
	<span style="color: #FF0000">GoogleSearchService Service1 = new GoogleSearchService()</span>;
	
	// Ask for spelling suggestion
	// The first argument is your key
	// The second one, the text the user should enter.
	
	String suggestion = <span style="color: #FF0000">Service1.doSpellingSuggestion(licensekey, TextBox1.Text)</span>;	
	
	// Display the suggestion, if any
	if (suggestion == null)
		Label1.Text = "[No suggestion]";
	else	
		Label1.Text = suggestion;
}
<span style="color: #0000FF">&lt;/script&gt;</span>


&lt;html&gt;
&lt;body&gt;
&lt;h2&gt;Hello WebService!&lt;/h2&gt;
<span style="color: #0000FF">&lt;form runat="server"&gt;</span>
&lt;p&gt;<span style="color: #0000FF">&lt;asp:TextBox id="TextBox1" runat="server"&gt;&lt;/asp:TextBox&gt;</span>&lt;/p&gt;
&lt;p&gt;<span style="color: #0000FF">&lt;asp:Label id="Label1" runat="server"&gt;&lt;/asp:Label&gt;</span>&lt;/p&gt;
&lt;p&gt;<span style="color: #0000FF">&lt;input type="submit" value="Submit" runat="server"&gt;&lt;/input&gt;</span>&lt;/p&gt;
<span style="color: #0000FF">&lt;/form&gt;</span>
&lt;/body&gt;
&lt;/html&gt;
</pre>
This will look like this:<p/>
<img src="google.png" border="1" />
<p />

The code, where the web service is accessed is marked red.<p />
To test the service enter: spelll checker for example.

<h3>Application 2: A Console Application</h3>
You can as well consume the WebService with a Console or Gtk# application. <p />
You need to reference GoogleSearchService.dll.
<pre class="console">
mcs /r:GoogleSearchService.dll spellchecker.cs
</pre>

The Code:

<pre class="code">
using System;

class SpellChecker {

	public static void Main(string [] args) {
    
		// Your license key
		const string licensekey = "FCszK/FQFHJWQE1n5OkeGmZAWzCFY5+7";
		
		// Create a Google Search object
		GoogleSearchService Service1 = new GoogleSearchService();
		
		// Ask for spelling suggestion
		// The first argument is your key
		// The second one, the text the user should enter.
		
		String suggestion = Service1.doSpellingSuggestion(licensekey, args[0]);	
		
		// Display the suggestion, if any
		if (suggestion == null)
			Console.WriteLine("[No suggestion]");
		else	
			Console.WriteLine(suggestion);
	}
}
</pre>
<h3>Documentation</h3>
If you want to do more, you will require a documentation of the webservice.
<p />

</body>
</html>
