<?xml version="1.0" encoding="utf-8"?>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:monodoc="http://www.go-mono.org/xml/monodoc">
<head>
	<title>Programming</title>

	<meta name = "DC.Description" content = "Monos Database Framework" />
	<meta name = "DC.Contributor" content = "Johannes Roith" />

	<link rel="stylesheet" type="text/css" href="../style.css" />

	<meta name = "CVS.English.Version" content = "1.8" />
</head>
<body>

<h2>Contents</h2>
<ul>
<li><a href="#introduction">I. Introduction</a></li>
<li><a href="#introduction">II. Overview of ADO.NET
Classes</a></li>
<li><a href="#introduction">III. Connecting DataSources</a></li>
<li><a href="#introduction">IV. A perfect team: XML &amp;
ADO.NET</a></li>
<li><a href="#introduction">V. Tools</a></li>
<li><a href="#introduction">VI. Code Examples</a></li>
<li><a href="#introduction">A. License: GNU Free Documentation
License</a></li></ul>
This sample will use the Mono.Data.PostgreSQL provider, because
it's installed on and available for most Linux installations. 
<h2>II. Overview of ADO.NET Classes</h2>
ADO.NET consists of 2 types of classes. Some are general, some are
specific for each provider. <br />
<br />
General: 
<ul>
<li>DataSet</li>
<li>DataTable</li>
<li>DataView</li>
<li>DataRelation</li>
<li>DataRow</li>
<li>DataColumn</li></ul>
Provider-Specific (replace 'PosgreSQL' with any other provider
name): 
<ul>
<li>PostgreSQLConnection</li>
<li>PostgreSQLDataReader</li>
<li>PostgreSQLCommand</li>
<li>PostgreSQLDataAdapter</li>
<li>PostgreSQLTransaction</li></ul>
<h3>Connection to PostgreSQL</h3>
XYZConnection (here: PostgreSQLConnection) connects to any data
source, for which a provider exists. This can be a client-server
database, but also a text-file, a directory service, or gconf (of
someone would create a provider :-) are possible. <br />
<br />
<div class="console">Before you start, you first need to setup a
PostgreSQL User and a Table.<br />
<br />
1.<br />
2.<br />
3.<br />
4.</div>
<br />
 This example connects to the Database and prints some Information.
Any information about the connection, like username , password,
server, etc., must be included in the <b>connection-string</b>.
Because this informations sometimes change, it should not be put
directly in the code (liker here), but better in the configuration
file or a text file. Sometimes it makes also sense to ask for the
password at runtime. This string must look like this: conn_string =
"server,port,name,password"; 
<pre class="code">
<b>// ADO.NET example - connectdb.cs</b>
<b>// (C) Copyright 2002 by Johannes Roith</b>

using System;
using System.Data;
using Mono.Data.PostgreSqlClient;

namespace Test.Mono.Data.PostgreSqlClient {

        class PostgresConnect {

                static void Main() {
                                        

                PostgreSQLConnection conn; 
                string conn_string;

                conn_string = "";

                conn = new PostgreSQLConnection(conn_string)

                // Open Connection

                conn.Open()

                Console.WriteLine("Connection opened.");
                Console.WriteLine("Datasource:" + conn.DataSource);
                Console.WriteLine("Version :"   + conn.ServerVersion);
                Console.WriteLine("Timeout :"   + conn.ConnectionTimeout);

                conn.Close()

                }
        }
</pre>
<h3>Database Command</h3>
This method is thought for executing commands, in most cases SQL
commands. Most communication with the DB is done through this. SQL
has commands to INSERT, SELECT, DELETE data, and many more. The
following example adds a new "dataset" to your database. The data
read from the Console and written to the database, using the INSERT
command. 
<p>To send any commands to the DB, you must at least pass a
connection and a command-string to PostgreSQLCommand</p>
<pre class="code">
<b>// ADO.NET example - writedb.cs</b>
<b>// (C) Copyright 2002 by Johannes Roith</b>

using System;
using System.Data;
using Mono.Data.PostgreSqlClient;

namespace Test.Mono.Data.PostgreSqlClient {

        class PostgresCommand {

                static void Main() {
                                        

                PostgreSQLConnection conn; 
                string conn_string;
                PostgreSQLCommand comm;

                conn_string = "";
                
                command_string="INSERT INTO test(name, phonenumber)values"
                                + ('"&amp;name &amp;"','"&amp;phonenumber &amp;"')";
                

                conn = new PostgreSQLConnection(conn_string)

                // Open Connection

                conn.Open()

                comm=new PostgreSQLCommand(command_string,conn)

                count=comm.ExecuteNonQuery()

                Console.WriteLine(count + "datasets were inserted.");
                conn.Close()

                }
        }
</pre>
<h3>Data Reader</h3>
<h3>DataTable</h3>
<h3>DataAdapter</h3>
<h2>III. Connecting DataSources</h2>
<h3>Data-binding for ASP.NET</h3>
In contrast to old ASP or languages like PHP,where you had to run
through data tables line-by-line and generate HTML by hand, for
example tables, ASP.NET offers several Controls to easily handle
this. 
<p>Data-binding is supported from all controls, that have the
DataSource and DataMember properties, as well as the DataBind()
Method.</p>
<h3>Data-binding for Gtk#</h3>
This has not been implemented in Gtk#, yet. 
<h3>Data-binding for System.Windows.Forms</h3>
Mono doesn't support this very good, yet, so this section will
follow, when the time has come. 
<h2>IV. A perfect team: XML &amp; ADO.NET</h2>
[TODO] 
</body>
</html>
