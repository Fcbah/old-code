<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>The Mono Handbook - Other tools: NUnit</title>
<link rel="stylesheet" type="text/css" href="../style.css" />
</head>
<body>
<h1>NUnit test framework</h1>

<h2>Contents</h2>
<ol>
<li><a href="#intro">Introduction</a></li>
<li><a href="#install">Install</a></li>
<li><a href="#cli">Command line options</a></li>
<li><a href="#gnunit">NUnit-gtk</a></li>
<li><a href="#code">Code sample</a></li>
<li><a href="#links">Useful links</a></li>
</ol>

<a id="intro"><h2>Introduction</h2></a>
NUnit is a unit-testing framework for all .NET languages initially
ported from JUnit.  It is written entirely in C# and has been completely
redesigned to take advantage of many .NET language features, for example
custom attributes and other reflection related capabilities. NUnit
brings xUnit to all .NET languages. 

<a id="install"><h2>Install</h2></a>
Currently NUnit version 2.2 beta is distributed with mono. Therefore,
you are able to use the NUnit framework right away.

<a id="cli"><h2>Command line options</h2></a>
<h3>Console Interface</h3>
The command line tool to run tests is called <i>nunit-console.exe</i>.
You can see the available arguments by running:
<br />
<br />
<code>nunit-console /help</code>
<br />
<br />
If want to run all the tests found in an assembly, just do:
<br />
<br />
<code>nunit-console <i>assemblyname.dll</i></code>
<br />
<br />
You will get a report on the console and a file called
<b>testresult.xml</b> in XML format with more information on the tests
run.

Some interesting options are:
<ul>
	<li><u>/fixture=STR
	</u>: allows you to specify a fixture to test.
	</li>
	<li><u>/xml=STR
	</u>: generates the XML output in STR instead of the default
	testresult.xml.</li>
	<li><u>/transform=STR
	</u>: applies the XSLT transform container in the file STR to
	the XML result file and displays it.</li>
	<li><u>/xmlConsole
	</u>: the output to the console is in XML format.</li>
	<li><u>/config=STR
	</u>: load project configuration the given file.</li>
	<li><u>/output=STR
	</u>: send the output to STR file instead of the console. Can be
	abbreviated as /out:STR.</li>
	<li><u>/err=STR
	</u>: provides a file name that receives test error output.</li>
	<li><u>/labels
	</u>: label each test on stdOut.</li>
	<li><u>/include=STR
	</u>: list of categories to include.</li>
	<li><u>/exclude=STR
	</u>: list of categories to exclude.</li>
</ul>
<h4>Command line samples</h4>
<code>nunit-console nunit.tests.dll</code><br />
Runs all the tests in nunit.tests.dll
<br />
<br />
<code>nunit-console /fixture:NUnit.Tests.AssertionTests /assembly:nunit.tests.dll
</code>
<br />
Runs all the tests in fixture NUnit.Tests.AssertionTests from assembly
nunit.tests.dll.
<br />
<br />
<code>nunit-console /assembly:nunit.tests.dll /xml:console-test.xml
</code>
<br />
Runs all the tests in nunit.tests.dll and store the XML results in
console-test.xml.
<br />
<br />
<code>nunit-console /assembly:nunit.tests.dll /transform:myTransform.xslt
</code>
<br />
Apply the XSLT transform in myTransform.xslt and display the output in
the console.
<br />

<a id="gnunit">
<h2>gnunit</h2></a>
If you like a GUI version of a NUnit test runner, then NUnit-gtk might 
be just what you are looking for.

<p>Running NUnit tests for assembly Microsoft.VisualBasic:</p>
<a href="gnunit.png"><img src="gnunit-thumb.png" border="0" /></a>

<h3>Install</h3>
You can get the latest release from <a
href="http://primates.ximian.com/~gonzalo/mono/gnunit/">
http://primates.ximian.com/~gonzalo/mono/gnunit/
</a>
<br />
If you want to get the source from CVS, the module name is 'nunit-gtk'.
<br />
Information on how to use the mono cvs repository is available 
<a href="http://www.go-mono.com/anoncvs.html">here</a>.

<h3>Run</h3>
To run the program execute <b>gnunit.exe</b>

<h4>Circles</h4>

The representation of the different colored circles:
<ul>
<li />Green: The test passed flawlessly
<li />Red: The test failed
<li />Yellow: The test did not run
</ul>

There is a motto saying: <b>Keep the bar green to keep the code clean ...</b>

<a id="code">
<h2>Code sample</h2></a>
<pre class="code">
using NUnit.Framework;

namespace NUnitTutorial {

	[TestFixture]
	public class MyUnitTest : Assertion {

		string foo;

		[SetUp]
		public void GetReady()
		{
			foo = "Foobar";
		}

		[Test]
		public void TestLength()
		{
			AssertEquals ("(1) Length", 6, foo.Length);
		}

		[TearDown]
		public void Clear()
		{
		}
	}
}
</pre>

The code above shows the basic structure of a unit test. 
Save it to a file named test.cs and compile:
<br />
<br />
<code>mcs -t:library -r:nunit.framework.dll test.cs
</code>
<br />
<br />
A brief explanation of the code follows:
<br />
<ol>
<li />First you will need to reference the framework:
<pre class="code">
using NUnit.Framework;
</pre>
<li />Then specify the test class: 
<pre class="code">
[TestFixture]
public class MyUnitTest : Assertion {...}
</pre>
It is not mandatory to inherit from Assertion, but if you do, the code becomes a little more clear and you will save some typing.
<br />Assertion.AssertionEquals (...) vs AssertionEquals (...)
<p />
<li />Initialize your variables
<pre class="code">
[SetUp]
public void GetReady() {...}
</pre>
<li />Write some tests
<pre class="code">
[Test]
public void TestLength() {...}
</pre>
<li />Tear it all down.
<pre class="code">
[TearDown]
public void Clear() {...}
</pre>
</ol>

<p />To learn more about the Attributes and Assertion methods go read the documentation at
<a href="http://www.nunit.org/documentation.html">www.nunit.org</a>

<a id="links">
<h2>Useful links</h2>
</a>
<ul>
<li /><a href="http://www.nunit.org">www.nunit.org</a>: Official NUnit website.
<li /><a href="http://www.junit.org">www.junit.org</a>: Contains lots of documents on howto write Unit tests.
</ul>
</body>
</html>
