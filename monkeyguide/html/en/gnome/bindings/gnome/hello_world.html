<?xml version="1.0" encoding="utf-8"?>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:monodoc="http://www.go-mono.org/xml/monodoc">
<head>
	<title>GNOME.NET</title>

	<meta name = "DC.Description" content = "" />
	<meta name = "DC.Contributor" content = "Johannes Roith" />

	<link rel="stylesheet" type="text/css" href="../../../style.css" />
</head>
<body>

<p>This tutorial gets you started with writing GNOME.NET
programs.</p>
<h2>HelloWorld, first try</h2>
<p><code>helloworld1.cs</code>:</p>
<pre class="code">
    class HelloWorld
    {
            static void Main(string[] args)
            {
                    Gnome.Program program =
                    new Gnome.Program("Hello World", "1.0", Gnome.Modules.UI, args);

                    Gnome.App app = new Gnome.App("Hello World", "Hello World");
                    app.ShowAll();
 
                    program.Run();
            }
    }
</pre>
<p>compile:</p>
<pre class="console">
mcs helloworld.cs -r gnome-sharp.dll
</pre>
<p>run:</p>
<pre class="console">
mono helloworld1.exe
</pre>
<p>It is a bit longer than console Hello World and needs some
explanation.</p>
<p>In <code>Main()</code> at first you see:</p>
<pre class="code">
                    Gnome.Program program =
                    new Gnome.Program("Hello World", "1.0", Gnome.Modules.UI, args);
</pre>
<p>This initializes GNOME and is needed in every GNOME application.
Here we are creating a variable of type <code>Gnome.Program</code>,
called <code>program</code>. This variable, <code>program</code>,
is used to control the GNOME program, as we will see later.</p>
<p>Next we see:</p>
<pre class="code">
                    Gnome.App app = new Gnome.App("Hello World", "Hello World");
</pre>
<p>This creates our GNOME application window. (That is what you see
on the screen.)</p>
<p>We then see:</p>
<pre class="code">
                    app.ShowAll();
</pre>
<p>This makes the GNOME Application Window (that you created with
the previous line of code) visible on the screen. With GNOME,
things do not automatically display themselves unless you explicitly
tell them too.</p>
<p>And finally we see:</p>
<pre class="code">
                    program.Run();
</pre>
<p>This makes your GNOME program <i>run</i>. It makes all the magic
happen, that you don't need to worry about at this moment. Needless
to say though, you need to do this to make your GNOME Application
work.</p>
<h2>HelloWorld, second try</h2>
<p>While the above program compiles and runs, it does not quit
properly. You have to exit by pressing CTRL+C. (Ideally we want
the program to close when you press the "X" on the title bar. Which
is what this next example does.)</p>
<p><code>helloworld2.cs</code>:</p>
<pre class="code">
    class HelloWorld
    {
            static void Main(string[] args)
            {
                    Gnome.Program program =
                    new Gnome.Program("Hello World", "1.0", Gnome.Modules.UI, args);

                    MyMainWindow app = new MyMainWindow(program);
                    app.ShowAll();
 
                    program.Run();
            }
    }



    class MyMainWindow
            : Gnome.App
    {
            Gnome.Program program;

            public MyMainWindow(Gnome.Program gnome_program)
                    : base("Hello World", "Hello World")
            {
                    this.program = gnome_program;

                    this.DeleteEvent += delete_event;
            }

            private void delete_event(object obj, Gtk.DeleteEventArgs args)
            {
                    this.program.Quit();
            }
    }
</pre>
<p>compile:</p>
<pre class="console">
mcs helloworld2.cs -pkg:gnome-sharp,gtk-sharp
</pre>
<p>run:</p>
<pre class="console">
mono helloworld2.exe
</pre>
<p>The first thing you probably have noticed is that there are now
two classes. The first class -- <code>HelloWorld</code> -- is
almost identical to the version in the previous example. Except for
the following line:</p>
<pre class="code">
                    MyMainWindow app = new MyMainWindow(program);
</pre>
<p>You can compare this to the equivalent line in the previous
code:</p>
<pre class="code">
                    Gnome.App app = new Gnome.App("Hello World", "Hello World");
</pre>
<p>The difference is that app is no longer an instance of
<code>Gnome.App</code>, as it was in the first example
<code>helloworld.cs</code>. Now it is an instance of a new class
that we just created: <code>MyMainWindow</code>. (Also, what we
pass to the constructor of <code>MyMainWindow</code> is different
from what we passed to the constructor of
<code>Gnome.App</code>.)</p>
<p>In other words, the only difference (in this class) is that we
are using a different class for our window.</p>
<p>Now let us take a look at our <code>MyMainWindow</code>
class.</p>
<p>We created this new class because Gnome.App did not do exactly
what we wanted it to. We want our application window to close when
the "X" on the title bar is pressed. Which is what the code in the
<code>MyMainWindow</code> class accomplishes.</p>
<p>The important thing to focus on is this line:</p>
<pre class="code">
                    this.DeleteEvent += new delete_event;
</pre>
<p>This makes it so that when the "X" button on the title bar is
pressed, the function <code>delete_event</code> is called.
Technically, when the "X" button is pressed, the program receives a
<code>DeleteEvent</code>, which is what you see in the code
above.</p>
<p>The next thing to focus on is the definition of
<code>delete_event</code>:</p>
<pre class="code">
            private void delete_event(object obj, Gtk.DeleteEventArgs args)
            {
                    this.program.Quit();
            }
</pre>
<p>This is the function that is called when the application
receives a <code>DeleteEvent</code>. I.e., when the user clicks the
"X" button on the title bar. As you can hopefully see, when this
function is called, the program will quit.</p>
<p>Which is what we wanted.</p>

</body>
</html>
