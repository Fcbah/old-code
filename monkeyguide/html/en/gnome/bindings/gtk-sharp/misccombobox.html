<?xml version="1.0" encoding="utf-8"?>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:monodoc="http://www.go-mono.org/xml/monodoc">
<head>
	<title>Gtk# - Miscellaneous Widgets - ComboBox</title>

	<meta name ="DC.Description" content ="" />
	<meta name ="DC.Contributor" content ="Johannes Roith" />

	<link rel="stylesheet" type="text/css" href="../../../style.css" />
</head>
<body>

The combo box is another fairly simple widget that is really just a
collection of other widgets. From the user's point of view, the
widget consists of a text entry box and a pull down menu from which
the user can select one of a set of predefined entries.
Alternatively, the user can type a different option directly into
the text box. 
<p>The following extract from the structure that defines a Combo
Box identifies several of the components:</p>
<pre class="code">
struct _GtkCombo { 
        GtkHBox hbox; 
        GtkWidget *entry; 
        GtkWidget *button;
        GtkWidget *popup; 
        GtkWidget *popwin; 
        GtkWidget *list;
        ...  };
</pre>
As you can see, the Combo Box has two principal parts that you
really care about: an entry and a list. 
<p>First off, to create a combo box, use:</p>
<pre class="code">
Combo combo1 = new Combo();
</pre>
Now, if you want to set the string in the entry section of the
combo box, this is done by manipulating the entry widget directly: 
<pre class="code">
combo1.Entry.Text = "My String.";
</pre>
To set the values in the popdown list, one uses the function: 
<pre class="code">
combo1.PopdownStrings = string[];
</pre>
Before you can do this, you have to assemble a GList of the strings
that you want. GList is a linked list implementation that is part
of GLib, a library supporting GTK. For the moment, the quick and
dirty explanation is that you need to set up a GList pointer, set
it equal to NULL, then append strings to it with 
<pre class="code">
GList *g_list_append( GList *glist, 
                      gpointer data );
</pre>
It is important that you set the initial GList pointer to NULL. The
value returned from the g_list_append() function must be used as
the new pointer to the GList. Here's a typical code segment for
creating a set of options: 
<pre class="code">
    GList glist = null;

    glist = g_list_append (glist, "String 1");
    glist = g_list_append (glist, "String 2");
    glist = g_list_append (glist, "String 3"); 
    glist = g_list_append (glist, "String 4");

    combo1.PopdownStrings = glist;
    
    /* can free glist now, combo takes a copy */
</pre>
The combo widget makes a copy of the strings passed to it in the
glist structure. As a result, you need to make sure you free the
memory used by the list if that is appropriate for your
application. 
<p>At this point you have a working combo box that has been set up.
There are a few aspects of its behavior that you can change. These
are accomplished with the functions:</p>
<pre class="code">
combo1.UseArrows = bool val;

combo1.UseArrowsAlways = bool val;

combo1.CaseSensitive   = bool val;
</pre>
gtk_combo_set_use_arrows() lets the user change the value in the
entry using the up/down arrow keys. This doesn't bring up the list,
but rather replaces the current text in the entry with the next
list entry (up or down, as your key choice indicates). It does this
by searching in the list for the item corresponding to the current
value in the entry and selecting the previous/next item
accordingly. Usually in an entry the arrow keys are used to change
focus (you can do that anyway using TAB). Note that when the
current item is the last of the list and you press arrow-down it
changes the focus (the same applies with the first item and
arrow-up). 
<p>If the current value in the entry is not in the list, then the
function of gtk_combo_set_use_arrows() is disabled.</p>
<p>gtk_combo_set_use_arrows_always() similarly allows the use the
the up/down arrow keys to cycle through the choices in the dropdown
list, except that it wraps around the values in the list,
completely disabling the use of the up and down arrow keys for
changing focus.</p>
<p>gtk_combo_set_case_sensitive() toggles whether or not GTK
searches for entries in a case sensitive manner. This is used when
the Combo widget is asked to find a value from the list using the
current entry in the text box. This completion can be performed in
either a case sensitive or insensitive manner, depending upon the
use of this function. The Combo widget can also simply complete the
current entry if the user presses the key combination MOD-1 and
"Tab". MOD-1 is often mapped to the "Alt" key, by the xmodmap
utility. Note, however that some window managers also use this key
combination, which will override its use within GTK.</p>
<p>Now that we have a combo box, tailored to look and act how we
want it, all that remains is being able to get data from the combo
box. This is relatively straightforward. The majority of the time,
all you are going to care about getting data from is the entry. The
entry is accessed simply by GTK_ENTRY (GTK_COMBO
(combo)-&gt;entry). The two principal things that you are going to
want to do with it are connect to the activate signal, which
indicates that the user has pressed the Return or Enter key, and
read the text. The first is accomplished using something like:</p>
<pre class="code">
combo1.Entry.ActiveEvent = new EventHandler(OnActive);
</pre>
Getting the text at any arbitrary time is accomplished by simply
using the entry function: 
<pre class="code">
string text = entry1.Text;
</pre>
Such as: 
<pre class="code">
string text = combo1.Entry.Text;
</pre>
That's about all there is to it. There is a function 
<pre class="code">
combo1.DisableActivate();
</pre>
that will disable the activate signal on the entry widget in the
combo box. Personally, I can't think of why you'd want to use it,
but it does exist. 

</body>
</html>
