<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="generator" content=
"HTML Tidy for Linux/x86 (vers 1st October 2003), see www.w3.org" />
<title>Manpage of genxs</title>
</head>
<body>

<h1>genxs</h1>
Section: User Commands (1)<br />


<hr />
<a name="lbAB" id="lbAB"></a>
<h2>NAME</h2>
genxs - Mono's Xml Serializer Generator <a name="lbAC" id=
"lbAC"></a>
<h2>SYNOPSIS</h2>
<p><b>genxs</b> configurationFile [destinationFolder] <a name=
"lbAD" id="lbAD"></a></p>
<h2>DESCRIPTION</h2>
<i>genxs</i> is a tool for generating custom XML serialization
writers and readers for classes.
<p><i>configurationFile</i> is configuration file which specifies
several information, such as the class for which to generate the
reader and writer, the name and namespace of the classes to
generate, and a collection of hooks to apply. By using hooks it is
possible to customize the behavior of the serializer without
needing to modify the generated file, so you can safely regenerate
it if the source class is modified.</p>
<p><i>destinationFolder</i> specifies the folder where the files
will be generated.</p>
<p><b>NOTE:</b> This tool only runs in the Mono runtime, since it
uses some internal classes not available in other runtimes.
<a name="lbAE" id="lbAE"></a></p>
<h2>CONFIGURATION FILE FORMAT</h2>
The configuration file is an xml document based on the following
grammar ("?" means optional, "*" 0 or more):
<pre>
        &lt;configuration&gt;
                &lt;serializer class="name" assembly="name"&gt; *
                        &lt;reader&gt;name&lt;/reader&gt; ?
                        &lt;writer&gt;name&lt;/writer&gt; ?
                        &lt;namespace&gt;name&lt;/namespace&gt; ?
                        &lt;outFileName&gt;name&lt;/outFileName&gt; ?
                        &lt;readerHooks&gt; ?
                                &lt;hook ...&gt; *
                        &lt;/readerHooks&gt;
                        &lt;writerHooks&gt; ?
                                &lt;hook ...&gt; *
                        &lt;/writerHooks&gt;
                &lt;/serializer&gt;
        &lt;/configuration&gt;
</pre>
<p>A configuration file can have multiple "serializer" elements,
each of which specifies the class for which to generate a
serializer together with several generation options. The source
class is specified in the following attributes:</p>
<dl compact="compact">
<dt>*</dt>
<dd><i>class</i> : name of the class (including namespace).</dd>
<dt>*</dt>
<dd><i>assembly</i> : assembly name. It can include the complete
path.</dd>
</dl>
<p>Generation options are specified in child elements:</p>
<dl compact="compact">
<dt>*</dt>
<dd><i>reader</i> : name of the reader class.</dd>
<dt>*</dt>
<dd><i>writer</i> : name of the writer class.</dd>
<dt>*</dt>
<dd><i>namespace</i> : namespace of the reader and writer
classes.</dd>
<dt>*</dt>
<dd><i>outFileName</i> : name of the generated file.</dd>
<dt>*</dt>
<dd><i>readerHooks</i> : a list of hooks to apply to the
reader.</dd>
<dt>*</dt>
<dd><i>writerHooks</i> : a list of hooks to apply to the
writer.</dd>
</dl>
<a name="lbAF" id="lbAF"></a>
<h2>SPECIFYING HOOKS</h2>
Using hooks you can customize the behavior of readers and writers.
A hook specification follows this grammar:
<pre>
        &lt;hook type="name"&gt;
                &lt;select&gt; ?
                        &lt;typeName&gt;name&lt;/typeName&gt; ?
                        &lt;typeAttribute&gt;name&lt;/typeAttribute&gt; *
                        &lt;typeMember&gt;name&lt;/typeMember&gt; ?
                &lt;/select&gt;
                &lt;replace&gt;source code&lt;/replace&gt; ?
                &lt;insertBefore&gt;source code&lt;/insertBefore&gt; ?
                &lt;insertAfter&gt;source code&lt;/insertAfter&gt; ?
        &lt;/hook&gt;
</pre>
<p>The "type" attribute specifies the context in which the hook is
applied. It can be one of the following:</p>
<dl compact="compact">
<dt>*</dt>
<dd><i>attributes</i> : hook is applied where attributes are
serialized/deserialized.</dd>
<dt>*</dt>
<dd><i>elements</i> : hook is applied where elements are
serialized/deserialized.</dd>
<dt>*</dt>
<dd><i>unknownAttribute</i> : hook is applied where unknown
attributes are processed.</dd>
<dt>*</dt>
<dd><i>unknownElement</i> : hook is applied where unknown elements
are processed.</dd>
<dt>*</dt>
<dd><i>member</i> : hook is applied where a member is
serialized/deserialized.</dd>
<dt>*</dt>
<dd><i>type</i> : hook is applied for the whole type.</dd>
</dl>
<p>The "select" element specifies the classes and members to which
the hook has to be added. It can contain the following
elements:</p>
<dl compact="compact">
<dt>*</dt>
<dd><i>typeName</i> : the class with that name will be selected
(must include namespace)</dd>
<dt>*</dt>
<dd><i>typeAttribute</i> : all classes which have that attribute
applied will be selected (specify the full attribute class name,
including namespace). Several attribute names can be
specified.</dd>
<dt>*</dt>
<dd><i>typeMember</i> : name of the class member for which the hook
must be added.</dd>
</dl>
<p>The hook source code can be specified using any of the following
elements:</p>
<dl compact="compact">
<dt>*</dt>
<dd><i>replace</i> : the provided source code will replace all
serialization/deserialization operations in the hook context.</dd>
<dt>*</dt>
<dd><i>insertBefore</i> : the source code will be added before the
hook context.</dd>
<dt>*</dt>
<dd><i>insertAfter</i> : the source code will be added after the
hook context.</dd>
</dl>
<p>When writing the code for a hook you can use some special
variables that are defined during the code generation process. The
variables are the following:</p>
<dl compact="compact">
<dt>*</dt>
<dd><i>$TYPE:</i> name of the class being generated, without
namespace.</dd>
<dt>*</dt>
<dd><i>$FULLTYPE:</i> full name of the class being generated,
including namespace.</dd>
<dt>*</dt>
<dd><i>$OBJECT:</i> the object being serialized or deserialized.
When using a replace reader hook of type "type", the hook code must
assign the deserialized object to this variable.</dd>
<dt>*</dt>
<dd>-I $ELEMENT: name of the element of the object being
serialized/deserialized.</dd>
<dt>*</dt>
<dd><i>$NAMESPACE:</i> namespace of the element of the object being
serialized/deserialized.</dd>
<dt>*</dt>
<dd><i>$MEMBER:</i> name of the member being
serialized/deserialized. Only valid in the "member" context.</dd>
</dl>
<a name="lbAG" id="lbAG"></a>
<h2>HOOK EXAMPLES</h2>
The following example adds a call to a Validate method after the
deserialization of any object:
<pre>
&lt;hook type="type"&gt;
        &lt;insertAfter&gt;
                System.Xml.Schema.XmlSchema.Validate$TYPE ($OBJECT);
        &lt;/insertAfter&gt;
&lt;/hook&gt;
</pre>
<p>This example specifies the code to be used to deserialize the
XmlSchema class:</p>
<pre>
&lt;hook type="type"&gt;
        &lt;select&gt;
                &lt;typeName&gt;System.Xml.Schema.XmlSchema&lt;/typeName&gt;
        &lt;/select&gt;
        &lt;replace&gt;
                $OBJECT = System.Xml.Schema.XmlSchema.Read (Reader, null);
        &lt;/replace&gt;
&lt;/hook&gt;
</pre>
<p>That one specifies the code to be used to read XmlSchema
instances:</p>
<pre>
&lt;hook type="type"&gt;
        &lt;select&gt;
                &lt;typeName&gt;System.Xml.Schema.XmlSchema&lt;/typeName&gt;
        &lt;/select&gt;
        &lt;replace&gt;$OBJECT.Write (Writer);&lt;/replace&gt;
&lt;/hook&gt;
</pre>
<p>With this two hooks the serializer will print some information
when serializing the class "MyClass":</p>
<pre>
&lt;hook type="type"&gt;
        &lt;select&gt;
                &lt;typeName&gt;MyNamespace.MyClass&lt;/typeName&gt;
        &lt;/select&gt;
        &lt;insertBefore&gt;Console.WriteLine ("Serializing MyClass");&lt;/replace&gt;
        &lt;insertAfter&gt;Console.WriteLine ("MyClass serialized");&lt;/insertAfter&gt;
&lt;/hook&gt;
&lt;hook type="member"&gt;
        &lt;select&gt;
                &lt;typeName&gt;MyNamespace.MyClass&lt;/typeName&gt;
        &lt;/select&gt;
        &lt;insertAfter&gt;
                Console.WriteLine ("Serialized member $MEMBER");
        &lt;/insertAfter&gt;
&lt;/hook&gt;
</pre>
<p>This hook writes an additional element for all types that have
the custom attribute "MyAttribute":</p>
<pre>
&lt;hook type="elements"&gt;
        &lt;select&gt;
                &lt;typeAttribute&gt;MyNamespace.MyAttribute&lt;/typeAttribute&gt;
        &lt;/select&gt;
        &lt;insertAfter&gt;
                Writer.WriteStartElement ("privateData");
                Writer.WriteString ($OBJECT.PrivateData);
                Writer.WriteEndElement ();
        &lt;/insertAfter&gt;
&lt;/hook&gt;
</pre>
<a name="lbAH" id="lbAH"></a>
<h2>CONFIGURATION FILE EXAMPLE</h2>
This is the configuration file used to generate the serializer for
ServiceDescription:
<pre>
&lt;configuration&gt;
        &lt;serializer class="System.Web.Services.Description.ServiceDescription" assembly="System.Web.Services"&gt;
                &lt;reader&gt;ServiceDescriptionReaderBase&lt;/reader&gt;
                &lt;writer&gt;ServiceDescriptionWriterBase&lt;/writer&gt;
                &lt;namespace&gt;System.Web.Services.Description&lt;/namespace&gt;
                &lt;outFileName&gt;ServiceDescriptionSerializerBase.cs&lt;/outFileName&gt;
                &lt;readerHooks&gt;
                        &lt;hook type="unknownElement"&gt;
                                &lt;select&gt;
                                        &lt;typeAttribute&gt;System.Web.Services.Configuration.XmlFormatExtensionPointAttribute&lt;/typeAttribute&gt;
                                &lt;/select&gt;
                                &lt;replace&gt;ServiceDescription.ReadExtension (Reader, $OBJECT);&lt;/replace&gt;
                        &lt;/hook&gt;
                        &lt;hook type="type"&gt;
                                &lt;select&gt;
                                        &lt;typeName&gt;System.Xml.Schema.XmlSchema&lt;/typeName&gt;
                                &lt;/select&gt;
                                &lt;replace&gt;$OBJECT = System.Xml.Schema.XmlSchema.Read (Reader, null);&lt;/replace&gt;
                        &lt;/hook&gt;
                &lt;/readerHooks&gt;
                &lt;writerHooks&gt;
                        &lt;hook type="elements"&gt;
                                &lt;select&gt;
                                        &lt;typeAttribute&gt;System.Web.Services.Configuration.XmlFormatExtensionPointAttribute&lt;/typeAttribute&gt;
                                &lt;/select&gt;
                                &lt;insertBefore&gt;ServiceDescription.WriteExtensions (Writer, $OBJECT);&lt;/insertBefore&gt;
                        &lt;/hook&gt;
                        &lt;hook type="type"&gt;
                                &lt;select&gt;
                                        &lt;typeName&gt;System.Xml.Schema.XmlSchema&lt;/typeName&gt;
                                &lt;/select&gt;
                                &lt;replace&gt;$OBJECT.Write (Writer);&lt;/replace&gt;
                        &lt;/hook&gt;
                &lt;/writerHooks&gt;
        &lt;/serializer&gt;
&lt;/configuration&gt;
</pre>
<a name="lbAI" id="lbAI"></a>
<h2>AUTHORS</h2>
Lluis Sanchez Gual (<a href=
"mailto:lluis@ximian.com">lluis@ximian.com</a>)
<p><a name="lbAJ" id="lbAJ"></a></p>
<h2>LICENSE</h2>
GenXS is released under the terms of the GNU GPL.
<p><a name="lbAK" id="lbAK"></a></p>
<h2>SEE ALSO</h2>
<a href="mono.1.html">mono</a>(1),
<a href="mcs.1.html">mcs</a>(1)
<hr />
<a name="index" id="index"></a>
<h2>Index</h2>
<dl>
<dt><a href="#lbAB">NAME</a></dt>
<dt><a href="#lbAC">SYNOPSIS</a></dt>
<dt><a href="#lbAD">DESCRIPTION</a></dt>
<dt><a href="#lbAE">CONFIGURATION FILE FORMAT</a></dt>
<dt><a href="#lbAF">SPECIFYING HOOKS</a></dt>
<dt><a href="#lbAG">HOOK EXAMPLES</a></dt>
<dt><a href="#lbAH">CONFIGURATION FILE EXAMPLE</a></dt>
<dt><a href="#lbAI">AUTHORS</a></dt>
<dt><a href="#lbAJ">LICENSE</a></dt>
<dt><a href="#lbAK">SEE ALSO</a></dt>
</dl>
<hr />
This document was created by <a href=
"http://localhost/cgi-bin/man/man2html">man2html</a>, using the
manual pages.<br />
Time: 15:17:19 GMT, June 25, 2004
</body>
</html>
