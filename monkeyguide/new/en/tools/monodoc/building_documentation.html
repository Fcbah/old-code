<?xml version="1.0" encoding="utf-8"?>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:monodoc="http://www.go-mono.org/xml/monodoc">
<head>
	<title>Monodoc: Building Documentation</title>

	<meta name = "DC.Description" content = "How to write docs for Monodoc" />
	<meta name = "DC.Contributor" content = "Christian Hergert" />

	<link rel="stylesheet" type="text/css" href="style.css" />
</head>

<body>

<a name="TableOfContents">
<div class="ChapterTitle">Table Of Contents</div>
<ol>
  <li><a href="#chapter1">Introduction to Monodoc</a></li>
  <li><a href="#chapter2">Building Documentation</a></li>
    <ol>
      <li><a href="#chapter2_1">Building our sample application</a></li>
      <li><a href="#chapter2_2">Creating our reference xml documents</a></li>
      <li><a href="#chapter2_3">Bundling our documentation</a></li>
      <li><a href="#chapter2_4">Installing to monodoc</a></li>
    </ol>
  <li><a href="#chapter3">Editing Documentation</a></li>
  <li><a href="#chapter4">Merging Documentation</a></li>
  <li><a href="#chapter5">Summary</a></li>
  <li><a href="#chapter6">FAQ</a></li>
</ol>
</a>

<!-- Chapter 1 -->
<a name="chapter1">
  <div class="ChapterTitle">Introduction to Monodoc</div>
  <p class="ChapterContents">Monodoc is a stable documentation system
    developed especially for mono and .NET. It started as a simple browser
    for published ECMA XML docs and soon grew to be a scalable
    documentation browser and editor.</p>

  <p class="ChapterContents">The implementation of monodoc is very
    different from what most developers are familiar with. Rather than
    documentating in-code, documentation is included in an external xml
    file. This allows for interesting features like distributed
    documentation by all your developers. While the learning curve is
    slightly higher for this style of documentation, its benefits are well
    worth for projects of moderate sizes and larger.</p>
  
  <p class="ChapterContents">Monodoc works by generating reference xml
    documents for .NET assemblies. This is done using System.Reflection to
    extract all the System.Type objects from the referencing
    assembly. Documentation for each System.Type is done in the xml
    document. To be viewed in monodoc, those xml documents must be
    prepared into monodoc format and added to the monodoc node list. The
    benefit of adding the documentation to monodoc is the use of monodoc's
    documentation editor.</p>
  <a href="#TableOfContents">Table Of Contents</a>
</a>
<!-- End Chapter 1 -->

<!-- Chapter 2 -->
<a name="chapter2">
  <div class="ChapterTitle">Building Documentation</div>
  <a name="chapter2_1">
    <p class="ChapterContents">Before we can start building our documentation, we need to have an example project to work with. For the sake of simplicity, the standard HelloWorld console project is used. The following examples are shown in MonoDevelop, but any editor or IDE can be used.</p>
    <center>
      <img src="monodoc-createproject.png" alt="Create our project in MonoDevelop" align="center" />
    </center>
    <p class="ChapterContents">The following is the code for <code>Main.cs</code>.</p>
    <code>// project created on 11/28/2004 at 6:49 PM
using System;

namespace Example
{
	public class MainClass
	{
		public static void Main(string[] args) {
			new HelloWorldApp( args );
		}
	}

	public class HelloWorldApp
	{
		private string name;
		
		public HelloWorldApp( string [] args ) {
			this.Name = this.ArgsToName( args );
			Console.WriteLine( "Hello, " + this.Name + "!" );
		}
		
		public string Name {
			get { return name; }
			set { name = value; }
		}
		
		public string ArgsToName( string [] args ) {
			if ( args.Length &lt; 1 ) return "Unknown";
			
			string retval = "";
			foreach( string arg in args ) {
				retval += arg + ((args.Length &gt; 1) ? " " : "");
			}
			return retval.Trim();
		}
	}
}
</code>
    <p class="ChapterContents">
      You can now build this project with MonoDevelop or
    </p>
    <p class="Commands">$ mcs -out:HelloWorld.exe -target:exe Main.cs</p>
    <p class="Note">
      If you build your project with MonoDevelop that your output executable will bin in 
      <code>HelloWorld/bin/Debug/</code> by default.</p>
  </a>
  
  <a name="chapter2_2">
    <p class="ChapterContents">
      With the newly generated executable, xml reference documents can be made. This is done with the following command.</p>
    <p class="Commands">$ monodoc --update HelloWorld.exe -o docs/</p>
    <p class="ChapterContents">
      The <code>--update</code> switch of monodoc updates the reference
      xml documents with new information from the passed assembly. This
      will not override existing comments so it works well if your
      asseblies change often. The <code>-o dirname</code> option allows
      changing of the output directory. The default output directory
      is <code>./</code>. The reference xml documents are created or
	  updated in <code>outputdir/Namespace/Type.xml</code>
    </p>
  </a>
  
  <a name="chapter2_3">
    <p class="ChapterContents">
      With our xml reference documents created, monodoc can be used once
      again to bundle the documents into something usable by the gui. To do
      this, the <code>--assemble</code> option is used. That will output
      a <code>*.tree</code> and <code>*.zip</code> file. In addition to
      this, we need to create a <code>*.source</code> file and modify the
      monodoc.index file. This will add our new documentation into the class
      browser.
    </p>
    <p class="ChapterContents">
      First, let's bundle our documentation.
    </p>
    <p class="Commands">$ monodoc --assemble --out helloworld-docs docs/</p>
    <p class="ChapterContents">This now gives us <code>helloworld-docs.zip</code> and <code>helloworld-docs.tree</code>. All that is left, is build our helloworld-docs.source file and copy the three files to the monodoc sources directory. The following is the contents of the helloworld-docs.source file we need to create.</p>
  </a>
  <a name="chapter2_4">
    <pre class="code">&lt;?xml version="1.0"?&gt;
      &lt;monodoc&gt;
      &lt;source provider="ecma" basefile="helloworld-docs" path="classlib-helloworld"/&gt;
      &lt;/monodoc&gt;</pre>
    <p class="ChapterContents">Let's now copy the documentation files to the monodoc sources directory and edit the monodoc.index file.</p>
    <p class="Commands">$ sudo cp helloworld-docs.{tree,zip,source} `monodoc --get-sourcesdir`</p>
<p class="ChapterContents">Add the following line to your monodoc.xml file found in the monodoc base directory. It should be added inside the outermost <code>&lt;node&gt; </code> tag.</p>
<pre class="code">&lt;node label="HelloWorld Documentation" name="classlib-helloworld"/&gt;</pre>
    <p>You should now have HelloWorld sample documentation inside of monodoc. This
      will make it simple to edit from within the monodoc gui. The following image
      shows what monodoc should look like.</p>
    <center><img src="monodoc-monodoc1.png" alt="Monodoc Image" /></center>
  </a>
  
  <a href="#TableOfContents">Table Of Contents</a>
</a>
<!-- End Chapter 2 -->

<!-- Chapter 3 -->
<a name="chapter3">
  <div class="ChapterTitle">Editing Documentation</div>
  <p class="ChapterContents">Editing of documentation can be done within monodoc. While viewing your documentation from the previous chapter, look for [Edit] links. These links will take you to a form that allows you to update the documentation. The following images show you how to do this.</p>
  <center><img src="monodoc-monodoc2.png" alt="Monodoc Edit Image"/></center><br/>
  <center><img src="monodoc-monodoc3.png" alt="Monodoc Edit Content Image"/></center>
  <p class="ChapterContents">The changes that are made in monodoc are not immediately merged into the documentation you installed into the monodoc sources directory. To do this, we must merge the changes.</p>
  
  <a href="#TableOfContents">Table Of Contents</a>
</a>
<!-- End Chapter 3 -->

<!-- Chapter 4 -->
<a name="chapter4">
  <div class="ChapterTitle">Merging Documentation</div>
  <p class="ChapterContents">Merging documentation consists of binding the changes you have made in
    the editor to the XML reference documents. This can be done locally as well
    as remotely to the Mono Documentation Server. The remote server is used only
    for public projects such as Gtk#, Mono, and Gnome#. Once the documentation
    is merged, it can be distributed and seen just as you see it in Monodoc.</p>
  <p class="ChapterContents">To merge changes we use the <code>--merge-changes</code> option to monodoc
    on the command-line. It requires the change file created by monodoc and the
    folder containing your reference xml documents. The change file can be found
    at `<code>~/.config/monodoc/changeset.xml</code>'.</p>
  <p class="ChapterContents">To merge our changes we made above with their reference xml documents, we
    will execute the following command.</p>
  <p class="Commands">$ monodoc --merge-changes ~/.config/monodoc/changeset.xml docs/</p>
  <p class="ChapterContents">We can now build our documentation again so it can be distributed.</p>
  <p class="Commands">$ monodoc --assemble --out helloworld-docs docs/</p>
  <p class="ChapterContents">You can re-install or distribute the contents of this just like previously done in chapter 2.4</p>
  <a href="#TableOfContents">Table Of Contents</a>
</a>
<!-- End Chapter 4 -->

<!-- Chapter 5 -->
<a name="chapter5">
  <div class="ChapterTitle">Summary</div>
  <p class="ChapterContents">Monodoc has come quite a long way. There are a few places that it can still be extended to aide development teams. A great improvement would be the support for a documentation server for individual projects not associated with Mono. This would allow for a project team to host a server and work on their documentation in a distributed and efficient manner. What monodoc does currently, it does very well. This includes building, editing, and merging documentation in a safe and efficient manner.</p>
  
  <a href="#TableOfContents">Table Of Contents</a>
</a>
<!-- End Chapter 5 -->

<!-- Chapter 6 -->
<a name="chapter6">
  <div class="ChapterTitle">FAQ</div>
  <p class="ChapterContents"><b>Q: I made changes to my source code! How do I update the reference documents?
    </b><br/>
    A: You use the same command you used to create the documentation origonally. It
    should only update the new additions to your reference document.</p>
  <p class="Commands">$ monodoc --update HelloWorld.exe -o docs/</p>
  
  <a href="#TableOfContents">Table Of Contents</a>
</a>
<!-- End Chapter 6 -->

</body>
</html>
